2025-05-11 18:16:26,371 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:16:26,403 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:16:26,411 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:16:26,621 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:16:26,621 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:16:26,642 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:16:30,254 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:16:30,267 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:16:30,450 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:16:30,450 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:16:37,350 - __main__ - DEBUG - Processing message: From HSBC: 27May25 Internet Banking Transfer from 023-509***-001 AED 3,000.00- Your available balance is AED 1,052.23
2025-05-11 18:16:37,350 - __main__ - DEBUG - Parsing SMS: From HSBC: 27May25 Internet Banking Transfer from 023-509***-001 AED 3,000.00- Your available balance is AED 1,052.23
2025-05-11 18:16:37,350 - __main__ - DEBUG - Detected HSBC message
2025-05-11 18:16:37,350 - __main__ - DEBUG - Extracted amount: -3000.0
2025-05-11 18:16:37,365 - __main__ - DEBUG - Extracted date: 2025-05-27
2025-05-11 18:16:37,366 - __main__ - DEBUG - Final parsed data: amount=-3000.0, merchant=HSBC, date=2025-05-27, account_ids=['433e6ffadc44482e811c989bff9b9812']
2025-05-11 18:16:37,367 - __main__ - DEBUG - Parsed data: {'amount': -3000.0, 'merchant': 'HSBC', 'date': '2025-05-27', 'account_ids': ['433e6ffadc44482e811c989bff9b9812']}
2025-05-11 18:16:37,368 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'HSBC'}}]}, 'Amount': {'number': -3000.0}, 'Date': {'date': {'start': '2025-05-27'}}, 'Accounts': {'relation': [{'id': '433e6ffadc44482e811c989bff9b9812'}]}}}
2025-05-11 18:16:37,380 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 18:16:46,222 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 18:16:46,299 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8169-bb88-cb0b07079cd9', 'created_time': '2025-05-11T14:16:00.000Z', 'last_edited_time': '2025-05-11T14:16:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': -3000}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': -817.44}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': -3000}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '433e6ffa-dc44-482e-811c-989bff9b9812'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-27', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'HSBC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'HSBC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/HSBC-1f074f2347e58169bb88cb0b07079cd9', 'public_url': None, 'request_id': 'aec9ede4-2707-497e-bba2-568f2329def7'}
2025-05-11 18:16:46,304 - __main__ - ERROR - Get account name error: name 'ACCOUNT_MAPPING' is not defined
Traceback (most recent call last):
  File "C:\Users\Windows 11\OneDrive\Laptop\Github\notion-automation\app.py", line 375, in get_account_name
    return ACCOUNT_MAPPING.get(account_id, account_id)
           ^^^^^^^^^^^^^^^
NameError: name 'ACCOUNT_MAPPING' is not defined

2025-05-11 18:16:46,307 - werkzeug - INFO - 192.168.1.99 - - [11/May/2025 18:16:46] "POST /process HTTP/1.1" 200 -
2025-05-11 18:16:51,424 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transactionï¿½ID:ï¿½142616666
2025-05-11 18:16:51,425 - __main__ - DEBUG - Parsing SMS: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transactionï¿½ID:ï¿½142616666
2025-05-11 18:16:51,426 - __main__ - DEBUG - Detected e&money message
2025-05-11 18:16:51,427 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-11 18:16:51,427 - __main__ - DEBUG - Extracted merchant: DUNKIN
2025-05-11 18:16:51,428 - __main__ - DEBUG - Extracted date: 2025-05-10
2025-05-11 18:16:51,429 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=DUNKIN, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 18:16:51,430 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 18:16:51,431 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DUNKIN'}}]}, 'Amount': {'number': 7.0}, 'Date': {'date': {'start': '2025-05-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 18:16:51,437 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 18:16:53,303 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 18:16:53,307 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8195-a064-c9e0abfb7090', 'created_time': '2025-05-11T14:16:00.000Z', 'last_edited_time': '2025-05-11T14:16:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e58195a064c9e0abfb7090', 'public_url': None, 'request_id': 'b31b96f5-ac5b-4213-b9f6-a1cd9ecc0000'}
2025-05-11 18:16:53,312 - __main__ - ERROR - Get account name error: name 'ACCOUNT_MAPPING' is not defined
Traceback (most recent call last):
  File "C:\Users\Windows 11\OneDrive\Laptop\Github\notion-automation\app.py", line 375, in get_account_name
    return ACCOUNT_MAPPING.get(account_id, account_id)
           ^^^^^^^^^^^^^^^
NameError: name 'ACCOUNT_MAPPING' is not defined

2025-05-11 18:16:53,314 - werkzeug - INFO - 192.168.1.99 - - [11/May/2025 18:16:53] "POST /process HTTP/1.1" 200 -
2025-05-11 18:17:39,285 - werkzeug - INFO -  * Detected change in 'C:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:17:39,844 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:17:40,424 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:17:40,438 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:17:40,447 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:17:40,968 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:17:40,985 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:17:40,999 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:17:44,529 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:17:44,530 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:17:45,298 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:17:45,298 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:17:45,781 - werkzeug - INFO - 192.168.1.99 - - [11/May/2025 18:17:45] "GET / HTTP/1.1" 200 -
2025-05-11 18:17:45,931 - werkzeug - INFO - 192.168.1.99 - - [11/May/2025 18:17:45] "GET /qr HTTP/1.1" 200 -
2025-05-11 18:17:51,577 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transactionï¿½ID:ï¿½142616666
2025-05-11 18:17:51,578 - __main__ - DEBUG - Parsing SMS: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transactionï¿½ID:ï¿½142616666
2025-05-11 18:17:51,580 - __main__ - DEBUG - Detected e&money message
2025-05-11 18:17:51,581 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-11 18:17:51,582 - __main__ - DEBUG - Extracted merchant: DUNKIN
2025-05-11 18:17:51,583 - __main__ - DEBUG - Extracted date: 2025-05-10
2025-05-11 18:17:51,584 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=DUNKIN, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 18:17:51,584 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 18:17:51,585 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DUNKIN'}}]}, 'Amount': {'number': 7.0}, 'Date': {'date': {'start': '2025-05-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 18:17:51,596 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 18:17:55,087 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 18:17:55,092 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-817c-ae0e-eb174bd8e773', 'created_time': '2025-05-11T14:17:00.000Z', 'last_edited_time': '2025-05-11T14:17:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e5817cae0eeb174bd8e773', 'public_url': None, 'request_id': '1a10d9e0-6725-41db-a333-e859667ca2c5'}
2025-05-11 18:17:55,095 - __main__ - DEBUG - Mapping account ID 1c374f2347e580ac90aed5e1e7a86e32 to name: E&money
2025-05-11 18:17:55,097 - werkzeug - INFO - 192.168.1.99 - - [11/May/2025 18:17:55] "POST /process HTTP/1.1" 200 -
2025-05-11 18:19:35,897 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:19:35] "GET / HTTP/1.1" 200 -
2025-05-11 18:19:35,919 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:19:35] "GET /qr HTTP/1.1" 200 -
2025-05-11 18:19:39,131 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 18:19:39,132 - __main__ - DEBUG - Parsing SMS: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 18:19:39,134 - __main__ - DEBUG - Detected e&money message
2025-05-11 18:19:39,134 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-11 18:19:39,135 - __main__ - DEBUG - Extracted merchant: DUNKIN
2025-05-11 18:19:39,135 - __main__ - DEBUG - Extracted date: 2025-05-10
2025-05-11 18:19:39,135 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=DUNKIN, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 18:19:39,136 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 18:19:39,137 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DUNKIN'}}]}, 'Amount': {'number': 7.0}, 'Date': {'date': {'start': '2025-05-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 18:19:39,141 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 18:19:40,619 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 18:19:40,623 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8178-b20b-cadc60b543a5', 'created_time': '2025-05-11T14:19:00.000Z', 'last_edited_time': '2025-05-11T14:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e58178b20bcadc60b543a5', 'public_url': None, 'request_id': '57741079-fd1f-46bc-9dee-e55e00f8b9b3'}
2025-05-11 18:19:40,628 - __main__ - DEBUG - Mapping account ID 1c374f2347e580ac90aed5e1e7a86e32 to name: E&money
2025-05-11 18:19:40,629 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:19:40] "POST /process HTTP/1.1" 200 -
2025-05-11 18:20:56,588 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:20:56,671 - werkzeug - INFO -  * Detected change in 'C:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:20:57,750 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:20:57,750 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:20:57,765 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:20:57,766 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:20:57,772 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:20:57,772 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:21:01,776 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:21:01,779 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:21:01,796 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:21:01,796 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:22:47,165 - werkzeug - INFO -  * Detected change in 'C:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:22:48,420 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:22:48,535 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:22:48,568 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:22:48,580 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:22:49,578 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:22:49,595 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:22:49,615 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:22:52,828 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:22:52,828 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:22:53,767 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:22:53,767 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:24:39,970 - werkzeug - INFO -  * Detected change in 'C:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:24:40,663 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:24:41,291 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:24:41,307 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:24:41,318 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:24:41,934 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:24:41,950 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:24:41,955 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:24:45,554 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:24:45,570 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:24:45,947 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:24:45,947 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:24:48,172 - werkzeug - INFO -  * Detected change in 'C:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:24:49,357 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:24:49,376 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:24:49,383 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:24:49,765 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:24:50,714 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:24:50,735 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:24:50,736 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:24:53,530 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:24:53,530 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:24:54,788 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:24:54,789 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:25:22,406 - werkzeug - INFO -  * Detected change in 'C:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:25:23,489 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:25:23,489 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:25:23,507 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:25:23,508 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:25:24,754 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:25:24,754 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:25:24,754 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:30:42,135 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:30:42,167 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:30:42,168 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:31:36,032 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:31:36,051 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:31:36,053 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:32:00,869 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:32:00] "GET / HTTP/1.1" 200 -
2025-05-11 18:32:00,917 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:32:00] "GET /qr HTTP/1.1" 200 -
2025-05-11 18:35:43,505 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:35:43,520 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:35:43,521 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:35:47,744 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:35:47] "GET / HTTP/1.1" 200 -
2025-05-11 18:39:05,435 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:39:05] "GET / HTTP/1.1" 200 -
2025-05-11 18:39:05,478 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:39:05] "GET /qr HTTP/1.1" 200 -
2025-05-11 18:39:07,128 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:39:07] "GET / HTTP/1.1" 200 -
2025-05-11 18:39:08,523 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:39:08] "GET / HTTP/1.1" 200 -
2025-05-11 18:39:09,607 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:39:09] "GET / HTTP/1.1" 200 -
2025-05-11 18:39:44,433 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:39:44] "GET / HTTP/1.1" 200 -
2025-05-11 18:39:45,983 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:39:45] "GET / HTTP/1.1" 200 -
2025-05-11 18:39:47,482 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:39:47] "GET / HTTP/1.1" 200 -
2025-05-11 18:39:59,972 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:39:59] "GET / HTTP/1.1" 200 -
2025-05-11 18:40:34,228 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:40:34,242 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:40:34,243 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:40:36,294 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:40:36] "GET / HTTP/1.1" 200 -
2025-05-11 18:40:36,847 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:40:36] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:40:44,880 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:40:44] "GET / HTTP/1.1" 200 -
2025-05-11 18:40:44,933 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:40:44] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:40:47,262 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:40:47] "GET / HTTP/1.1" 200 -
2025-05-11 18:40:47,309 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:40:47] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:40:57,430 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:40:57] "GET / HTTP/1.1" 200 -
2025-05-11 18:40:57,472 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:40:57] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:41:05,542 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:05] "GET / HTTP/1.1" 200 -
2025-05-11 18:41:05,583 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:05] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:41:27,824 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:27] "GET / HTTP/1.1" 200 -
2025-05-11 18:41:27,968 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:27] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:41:48,709 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:48] "GET / HTTP/1.1" 200 -
2025-05-11 18:41:48,759 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:48] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:41:51,790 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:51] "GET / HTTP/1.1" 200 -
2025-05-11 18:41:51,839 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:51] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:41:52,810 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:52] "GET / HTTP/1.1" 200 -
2025-05-11 18:41:52,846 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:52] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:41:53,921 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:53] "GET / HTTP/1.1" 200 -
2025-05-11 18:41:53,954 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:53] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:41:55,103 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:55] "GET / HTTP/1.1" 200 -
2025-05-11 18:41:55,136 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:41:55] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:11,997 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:11] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:12,123 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:12] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:13,489 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:13] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:13,527 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:13] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:15,119 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:15] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:15,169 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:15] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:16,449 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:16] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:16,495 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:16] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:17,530 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:17] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:17,567 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:17] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:18,464 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:18] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:18,506 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:18] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:31,712 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:42:31,726 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:42:31,727 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:42:45,784 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:45] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:45,918 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:45] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:49,459 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:49] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:49,499 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:49] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:50,196 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:50] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:50,251 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:50] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:50,990 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:50] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:51,038 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:51] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:55,628 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:55] "GET / HTTP/1.1" 200 -
2025-05-11 18:42:55,670 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:55] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:42:58,640 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:42:58] "[33mPOST /send_sms HTTP/1.1[0m" 404 -
2025-05-11 18:43:02,864 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:43:02] "GET / HTTP/1.1" 200 -
2025-05-11 18:43:02,910 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:43:02] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:43:04,492 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:43:04] "GET / HTTP/1.1" 200 -
2025-05-11 18:43:04,540 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:43:04] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:44:50,010 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:44:50] "GET / HTTP/1.1" 200 -
2025-05-11 18:44:50,050 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:44:50] "GET /qr HTTP/1.1" 200 -
2025-05-11 18:44:50,180 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:44:50] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:44:52,199 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:44:52] "GET / HTTP/1.1" 200 -
2025-05-11 18:44:52,242 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:44:52] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:45:01,011 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:45:01,028 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:45:01,029 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:45:02,677 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:02] "GET / HTTP/1.1" 200 -
2025-05-11 18:45:02,709 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:02] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:45:04,046 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:04] "GET / HTTP/1.1" 200 -
2025-05-11 18:45:04,089 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:04] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:45:05,318 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:05] "GET / HTTP/1.1" 200 -
2025-05-11 18:45:05,359 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:05] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:45:06,034 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:06] "GET / HTTP/1.1" 200 -
2025-05-11 18:45:06,083 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:06] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:45:06,220 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:06] "GET / HTTP/1.1" 200 -
2025-05-11 18:45:06,264 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:06] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:45:06,386 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:06] "GET / HTTP/1.1" 200 -
2025-05-11 18:45:06,435 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:06] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:45:10,359 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:10] "[33mPOST /send_sms HTTP/1.1[0m" 404 -
2025-05-11 18:45:12,316 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:12] "GET / HTTP/1.1" 200 -
2025-05-11 18:45:12,358 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:12] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:45:16,051 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:16] "GET / HTTP/1.1" 200 -
2025-05-11 18:45:16,086 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:45:16] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:46:48,703 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:46:48] "GET / HTTP/1.1" 200 -
2025-05-11 18:46:48,844 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:46:48] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:46:50,163 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:46:50] "GET / HTTP/1.1" 200 -
2025-05-11 18:46:50,196 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:46:50] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:46:58,833 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:46:58,856 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:46:58,856 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:46:59,783 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:46:59] "GET / HTTP/1.1" 200 -
2025-05-11 18:46:59,832 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:46:59] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:47:01,188 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:01] "GET / HTTP/1.1" 200 -
2025-05-11 18:47:01,229 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:01] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:47:03,251 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:03] "GET / HTTP/1.1" 200 -
2025-05-11 18:47:03,302 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:03] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:47:08,326 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:08] "GET / HTTP/1.1" 200 -
2025-05-11 18:47:08,363 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:08] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:47:09,407 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:09] "GET / HTTP/1.1" 200 -
2025-05-11 18:47:09,452 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:09] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:47:16,070 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:16] "GET / HTTP/1.1" 200 -
2025-05-11 18:47:16,108 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:16] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:47:24,253 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:47:24] "[33mPOST /send_sms HTTP/1.1[0m" 404 -
2025-05-11 18:48:10,783 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:48:10,806 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:48:10,807 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:48:13,069 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:48:13] "GET / HTTP/1.1" 200 -
2025-05-11 18:48:13,220 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:48:13] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:48:14,917 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:48:14] "GET / HTTP/1.1" 200 -
2025-05-11 18:48:14,955 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:48:14] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:48:20,530 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:48:20] "GET / HTTP/1.1" 200 -
2025-05-11 18:48:20,574 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:48:20] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:49:33,445 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:49:33] "GET / HTTP/1.1" 200 -
2025-05-11 18:49:33,585 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:49:33] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:49:34,819 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:49:34] "GET / HTTP/1.1" 200 -
2025-05-11 18:49:34,858 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:49:34] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:49:46,620 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:49:46,634 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:49:46,636 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:49:46,938 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:49:46] "GET / HTTP/1.1" 200 -
2025-05-11 18:49:46,978 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:49:46] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:49:48,320 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:49:48] "GET / HTTP/1.1" 200 -
2025-05-11 18:49:48,355 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:49:48] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:50:21,972 - __main__ - INFO - Starting application on 192.168.1.99:8080
2025-05-11 18:50:21,983 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:50:21,984 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:50:22,704 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:22] "GET / HTTP/1.1" 200 -
2025-05-11 18:50:22,750 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:22] "GET /qr HTTP/1.1" 200 -
2025-05-11 18:50:22,870 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:22] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:50:24,230 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:24] "GET / HTTP/1.1" 200 -
2025-05-11 18:50:24,266 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:24] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:50:32,792 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:32] "GET / HTTP/1.1" 200 -
2025-05-11 18:50:32,824 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:32] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:50:34,959 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:34] "GET / HTTP/1.1" 200 -
2025-05-11 18:50:35,000 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:35] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:50:35,501 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:35] "GET / HTTP/1.1" 200 -
2025-05-11 18:50:35,535 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:35] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:50:36,235 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:36] "GET / HTTP/1.1" 200 -
2025-05-11 18:50:36,275 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:50:36] "[33mGET /messages HTTP/1.1[0m" 404 -
2025-05-11 18:57:45,330 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:57:45,340 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:57:48,605 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:57:48,607 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:57:50,333 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:57:51,264 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:57:51,270 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:57:55,083 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:57:55,085 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:57:56,735 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:57:57,615 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:57:57,620 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:58:01,597 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:58:01,599 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:58:19,207 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:58:20,301 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:58:20,308 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:58:24,594 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:58:24,596 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:58:26,344 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:58:27,282 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:58:27,288 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:58:30,768 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:58:30,769 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:58:56,956 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 18:58:56,958 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 18:58:56,959 - __main__ - DEBUG - Detected e&money message
2025-05-11 18:58:56,962 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-11 18:58:56,963 - __main__ - DEBUG - Extracted merchant: DUNKIN
2025-05-11 18:58:56,968 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-10
2025-05-11 18:58:56,969 - __main__ - DEBUG - Added E&money account ID
2025-05-11 18:58:56,970 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=DUNKIN, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 18:58:56,972 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 18:58:56,973 - __main__ - DEBUG - Adding to Notion: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 18:58:56,976 - __main__ - ERROR - Error in add_to_notion: name 'NOTION_API_KEY' is not defined
Traceback (most recent call last):
  File "c:\Users\Windows 11\OneDrive\Laptop\Github\notion-automation\app.py", line 301, in add_to_notion
    'Authorization': f'Bearer {NOTION_API_KEY}',
                               ^^^^^^^^^^^^^^
NameError: name 'NOTION_API_KEY' is not defined
2025-05-11 18:58:56,979 - __main__ - ERROR - Error adding to Notion: name 'NOTION_API_KEY' is not defined
Traceback (most recent call last):
  File "c:\Users\Windows 11\OneDrive\Laptop\Github\notion-automation\app.py", line 376, in process_sms
    result = add_to_notion(parsed_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\Windows 11\OneDrive\Laptop\Github\notion-automation\app.py", line 301, in add_to_notion
    'Authorization': f'Bearer {NOTION_API_KEY}',
                               ^^^^^^^^^^^^^^
NameError: name 'NOTION_API_KEY' is not defined
2025-05-11 18:58:56,983 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:58:56] "[35m[1mPOST /process HTTP/1.1[0m" 500 -
2025-05-11 18:58:58,672 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:58:58] "GET / HTTP/1.1" 200 -
2025-05-11 18:59:01,231 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 18:59:01,232 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 18:59:01,233 - __main__ - DEBUG - Detected e&money message
2025-05-11 18:59:01,233 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-11 18:59:01,233 - __main__ - DEBUG - Extracted merchant: DUNKIN
2025-05-11 18:59:01,234 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-10
2025-05-11 18:59:01,234 - __main__ - DEBUG - Added E&money account ID
2025-05-11 18:59:01,235 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=DUNKIN, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 18:59:01,235 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 18:59:01,236 - __main__ - DEBUG - Adding to Notion: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 18:59:01,236 - __main__ - ERROR - Error in add_to_notion: name 'NOTION_API_KEY' is not defined
Traceback (most recent call last):
  File "c:\Users\Windows 11\OneDrive\Laptop\Github\notion-automation\app.py", line 301, in add_to_notion
    'Authorization': f'Bearer {NOTION_API_KEY}',
                               ^^^^^^^^^^^^^^
NameError: name 'NOTION_API_KEY' is not defined
2025-05-11 18:59:01,238 - __main__ - ERROR - Error adding to Notion: name 'NOTION_API_KEY' is not defined
Traceback (most recent call last):
  File "c:\Users\Windows 11\OneDrive\Laptop\Github\notion-automation\app.py", line 376, in process_sms
    result = add_to_notion(parsed_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\Windows 11\OneDrive\Laptop\Github\notion-automation\app.py", line 301, in add_to_notion
    'Authorization': f'Bearer {NOTION_API_KEY}',
                               ^^^^^^^^^^^^^^
NameError: name 'NOTION_API_KEY' is not defined
2025-05-11 18:59:01,240 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:59:01] "[35m[1mPOST /process HTTP/1.1[0m" 500 -
2025-05-11 18:59:46,804 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 18:59:47,583 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 18:59:47,588 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 18:59:51,067 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 18:59:51,069 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 18:59:52,148 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:59:52] "GET / HTTP/1.1" 200 -
2025-05-11 18:59:55,242 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 18:59:55,243 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 18:59:55,244 - __main__ - DEBUG - Detected e&money message
2025-05-11 18:59:55,245 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-11 18:59:55,245 - __main__ - DEBUG - Extracted merchant: DUNKIN
2025-05-11 18:59:55,249 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-10
2025-05-11 18:59:55,250 - __main__ - DEBUG - Added E&money account ID
2025-05-11 18:59:55,250 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=DUNKIN, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 18:59:55,251 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 18:59:55,252 - __main__ - DEBUG - Adding to Notion: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 18:59:55,253 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 18:59:55,253 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DUNKIN'}}]}, 'Amount': {'number': 7.0}, 'Date': {'date': {'start': '2025-05-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 18:59:55,259 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 18:59:57,057 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 18:59:57,059 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-81dd-83b2-d8867e97cd98', 'created_time': '2025-05-11T14:59:00.000Z', 'last_edited_time': '2025-05-11T14:59:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e581dd83b2d8867e97cd98', 'public_url': None, 'request_id': 'ddeb1d11-40fa-4bd4-8375-8327c7fb95cd'}
2025-05-11 18:59:57,065 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-81dd-83b2-d8867e97cd98', 'created_time': '2025-05-11T14:59:00.000Z', 'last_edited_time': '2025-05-11T14:59:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e581dd83b2d8867e97cd98', 'public_url': None, 'request_id': 'ddeb1d11-40fa-4bd4-8375-8327c7fb95cd'}
2025-05-11 18:59:57,069 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 18:59:57] "POST /process HTTP/1.1" 200 -
2025-05-11 19:04:28,170 - werkzeug - INFO - 192.168.1.99 - - [11/May/2025 19:04:28] "GET / HTTP/1.1" 200 -
2025-05-11 19:04:28,305 - werkzeug - INFO - 192.168.1.99 - - [11/May/2025 19:04:28] "GET /qr HTTP/1.1" 200 -
2025-05-11 19:04:53,276 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:04:53] "GET / HTTP/1.1" 200 -
2025-05-11 19:04:53,314 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:04:53] "GET /qr HTTP/1.1" 200 -
2025-05-11 19:09:17,532 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:09:17] "GET / HTTP/1.1" 200 -
2025-05-11 19:13:39,179 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 19:13:39,181 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 19:13:39,182 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:13:39,183 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-11 19:13:39,183 - __main__ - DEBUG - Extracted merchant: DUNKIN
2025-05-11 19:13:39,184 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-10
2025-05-11 19:13:39,184 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:13:39,185 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=DUNKIN, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:13:39,185 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:13:39,186 - __main__ - DEBUG - Adding to Notion: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:13:39,187 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:13:39,187 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DUNKIN'}}]}, 'Amount': {'number': 7.0}, 'Date': {'date': {'start': '2025-05-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:13:39,191 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:13:42,528 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:13:42,534 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-81f7-afcc-fe1764eced2b', 'created_time': '2025-05-11T15:13:00.000Z', 'last_edited_time': '2025-05-11T15:13:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e581f7afccfe1764eced2b', 'public_url': None, 'request_id': '3f402d5d-2ea8-4bf4-affe-39c9cc9aba8e'}
2025-05-11 19:13:42,545 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-81f7-afcc-fe1764eced2b', 'created_time': '2025-05-11T15:13:00.000Z', 'last_edited_time': '2025-05-11T15:13:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e581f7afccfe1764eced2b', 'public_url': None, 'request_id': '3f402d5d-2ea8-4bf4-affe-39c9cc9aba8e'}
2025-05-11 19:13:42,550 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:13:42] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:06,146 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 8.00 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736. 
Date: 2025-05-01 13:50:36
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 492.11
Transaction ID: 139040051
2025-05-11 19:19:06,148 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 8.00 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736. 
Date: 2025-05-01 13:50:36
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 492.11
Transaction ID: 139040051
2025-05-11 19:19:06,149 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:06,149 - __main__ - DEBUG - Extracted amount: 8.0
2025-05-11 19:19:06,150 - __main__ - DEBUG - Extracted merchant: ANGELS KITCHEN DMCC
2025-05-11 19:19:06,150 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-01
2025-05-11 19:19:06,151 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:06,151 - __main__ - DEBUG - Final parsed data: amount=8.0, merchant=ANGELS KITCHEN DMCC, date=2025-05-01, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:06,152 - __main__ - DEBUG - Parsed data: {'amount': 8.0, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-05-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:06,153 - __main__ - DEBUG - Adding to Notion: {'amount': 8.0, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-05-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:06,153 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:06,154 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'ANGELS KITCHEN DMCC'}}]}, 'Amount': {'number': 8.0}, 'Date': {'date': {'start': '2025-05-01'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:06,159 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:07,749 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:07,750 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-816f-9016-fa6f9073dd37', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 8}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.18}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 8}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f074f2347e5816f9016fa6f9073dd37', 'public_url': None, 'request_id': '43af9f63-eb8f-434d-9e34-68d957853233'}
2025-05-11 19:19:07,756 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-816f-9016-fa6f9073dd37', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 8}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.18}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 8}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f074f2347e5816f9016fa6f9073dd37', 'public_url': None, 'request_id': '43af9f63-eb8f-434d-9e34-68d957853233'}
2025-05-11 19:19:07,760 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:07] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:07,882 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 60.69 was successfully completed at CARREFOUR BURJUMAN using your e& money card ending with 4736. 
Date: 2025-05-02 21:39:43
You earned AED 0.61 cash rewards with this transaction.
Available balance: AED 431.42
Transaction ID: 139664682
2025-05-11 19:19:07,884 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 60.69 was successfully completed at CARREFOUR BURJUMAN using your e& money card ending with 4736. 
Date: 2025-05-02 21:39:43
You earned AED 0.61 cash rewards with this transaction.
Available balance: AED 431.42
Transaction ID: 139664682
2025-05-11 19:19:07,885 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:07,885 - __main__ - DEBUG - Extracted amount: 60.69
2025-05-11 19:19:07,886 - __main__ - DEBUG - Extracted merchant: CARREFOUR BURJUMAN
2025-05-11 19:19:07,886 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-02
2025-05-11 19:19:07,887 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:07,887 - __main__ - DEBUG - Final parsed data: amount=60.69, merchant=CARREFOUR BURJUMAN, date=2025-05-02, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:07,888 - __main__ - DEBUG - Parsed data: {'amount': 60.69, 'merchant': 'CARREFOUR BURJUMAN', 'date': '2025-05-02', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:07,889 - __main__ - DEBUG - Adding to Notion: {'amount': 60.69, 'merchant': 'CARREFOUR BURJUMAN', 'date': '2025-05-02', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:07,890 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:07,890 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'CARREFOUR BURJUMAN'}}]}, 'Amount': {'number': 60.69}, 'Date': {'date': {'start': '2025-05-02'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:07,893 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:13,987 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:13,989 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8101-9f5f-c3901e5589fb', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 60.69}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 16.54}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 60.69}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-02', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CARREFOUR BURJUMAN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CARREFOUR BURJUMAN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CARREFOUR-BURJUMAN-1f074f2347e581019f5fc3901e5589fb', 'public_url': None, 'request_id': '6115f02d-c46e-455f-a019-2ab56b39cb95'}
2025-05-11 19:19:13,996 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8101-9f5f-c3901e5589fb', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 60.69}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 16.54}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 60.69}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-02', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CARREFOUR BURJUMAN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CARREFOUR BURJUMAN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CARREFOUR-BURJUMAN-1f074f2347e581019f5fc3901e5589fb', 'public_url': None, 'request_id': '6115f02d-c46e-455f-a019-2ab56b39cb95'}
2025-05-11 19:19:14,001 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:14] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:14,146 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 21.00 was successfully completed at CBS FINE FOODS GROCERY using your e& money card ending with 4736. 
Date: 2025-05-03 21:18:08
You earned AED 0.21 cash rewards with this transaction.
Available balance: AED 410.42
Transaction ID: 140042503
2025-05-11 19:19:14,147 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 21.00 was successfully completed at CBS FINE FOODS GROCERY using your e& money card ending with 4736. 
Date: 2025-05-03 21:18:08
You earned AED 0.21 cash rewards with this transaction.
Available balance: AED 410.42
Transaction ID: 140042503
2025-05-11 19:19:14,148 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:14,149 - __main__ - DEBUG - Extracted amount: 21.0
2025-05-11 19:19:14,149 - __main__ - DEBUG - Extracted merchant: CBS FINE FOODS GROCERY
2025-05-11 19:19:14,150 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-03
2025-05-11 19:19:14,151 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:14,151 - __main__ - DEBUG - Final parsed data: amount=21.0, merchant=CBS FINE FOODS GROCERY, date=2025-05-03, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:14,152 - __main__ - DEBUG - Parsed data: {'amount': 21.0, 'merchant': 'CBS FINE FOODS GROCERY', 'date': '2025-05-03', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:14,152 - __main__ - DEBUG - Adding to Notion: {'amount': 21.0, 'merchant': 'CBS FINE FOODS GROCERY', 'date': '2025-05-03', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:14,153 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:14,154 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'CBS FINE FOODS GROCERY'}}]}, 'Amount': {'number': 21.0}, 'Date': {'date': {'start': '2025-05-03'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:14,157 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:15,935 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:15,936 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8124-9983-f810298ba231', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 21}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.72}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 21}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-03', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CBS FINE FOODS GROCERY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CBS FINE FOODS GROCERY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CBS-FINE-FOODS-GROCERY-1f074f2347e581249983f810298ba231', 'public_url': None, 'request_id': '56f1baa1-84f4-4a82-af8d-b7d0c62b5a6f'}
2025-05-11 19:19:15,942 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8124-9983-f810298ba231', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 21}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.72}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 21}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-03', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CBS FINE FOODS GROCERY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CBS FINE FOODS GROCERY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CBS-FINE-FOODS-GROCERY-1f074f2347e581249983f810298ba231', 'public_url': None, 'request_id': '56f1baa1-84f4-4a82-af8d-b7d0c62b5a6f'}
2025-05-11 19:19:15,947 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:15] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:16,073 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 10.95 was successfully completed at BAQER MOHEBI-AL ROLLA using your e& money card ending with 4736. 
Date: 2025-05-03 23:17:22
You earned AED 0.11 cash rewards with this transaction.
Available balance: AED 399.47
Transaction ID: 140088619
2025-05-11 19:19:16,074 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 10.95 was successfully completed at BAQER MOHEBI-AL ROLLA using your e& money card ending with 4736. 
Date: 2025-05-03 23:17:22
You earned AED 0.11 cash rewards with this transaction.
Available balance: AED 399.47
Transaction ID: 140088619
2025-05-11 19:19:16,075 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:16,075 - __main__ - DEBUG - Extracted amount: 10.95
2025-05-11 19:19:16,075 - __main__ - DEBUG - Extracted merchant: BAQER MOHEBI-AL ROLLA
2025-05-11 19:19:16,076 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-03
2025-05-11 19:19:16,076 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:16,076 - __main__ - DEBUG - Final parsed data: amount=10.95, merchant=BAQER MOHEBI-AL ROLLA, date=2025-05-03, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:16,077 - __main__ - DEBUG - Parsed data: {'amount': 10.95, 'merchant': 'BAQER MOHEBI-AL ROLLA', 'date': '2025-05-03', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:16,078 - __main__ - DEBUG - Adding to Notion: {'amount': 10.95, 'merchant': 'BAQER MOHEBI-AL ROLLA', 'date': '2025-05-03', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:16,078 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:16,079 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'BAQER MOHEBI-AL ROLLA'}}]}, 'Amount': {'number': 10.95}, 'Date': {'date': {'start': '2025-05-03'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:16,082 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:27,937 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:28,003 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8191-9a34-f617107c0f75', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 10.95}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.98}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 10.95}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-03', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'BAQER MOHEBI-AL ROLLA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'BAQER MOHEBI-AL ROLLA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/BAQER-MOHEBI-AL-ROLLA-1f074f2347e581919a34f617107c0f75', 'public_url': None, 'request_id': '5263fc06-227a-4844-8621-9cfcd1190464'}
2025-05-11 19:19:28,012 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8191-9a34-f617107c0f75', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 10.95}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.98}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 10.95}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-03', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'BAQER MOHEBI-AL ROLLA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'BAQER MOHEBI-AL ROLLA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/BAQER-MOHEBI-AL-ROLLA-1f074f2347e581919a34f617107c0f75', 'public_url': None, 'request_id': '5263fc06-227a-4844-8621-9cfcd1190464'}
2025-05-11 19:19:28,016 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:28] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:28,175 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 8.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736. 
Date: 2025-05-05 14:02:06
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 390.97
Transaction ID: 140605115
2025-05-11 19:19:28,177 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 8.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736. 
Date: 2025-05-05 14:02:06
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 390.97
Transaction ID: 140605115
2025-05-11 19:19:28,178 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:28,178 - __main__ - DEBUG - Extracted amount: 8.5
2025-05-11 19:19:28,179 - __main__ - DEBUG - Extracted merchant: ANGELS KITCHEN DMCC
2025-05-11 19:19:28,179 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-05
2025-05-11 19:19:28,180 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:28,180 - __main__ - DEBUG - Final parsed data: amount=8.5, merchant=ANGELS KITCHEN DMCC, date=2025-05-05, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:28,181 - __main__ - DEBUG - Parsed data: {'amount': 8.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-05-05', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:28,182 - __main__ - DEBUG - Adding to Notion: {'amount': 8.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-05-05', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:28,182 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:28,183 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'ANGELS KITCHEN DMCC'}}]}, 'Amount': {'number': 8.5}, 'Date': {'date': {'start': '2025-05-05'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:28,188 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:31,223 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:31,225 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-818a-85ff-d40e214b7428', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 8.5}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.32}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 8.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-05', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f074f2347e5818a85ffd40e214b7428', 'public_url': None, 'request_id': 'e856588a-4214-49ef-8b87-f0a16f0cccee'}
2025-05-11 19:19:31,232 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-818a-85ff-d40e214b7428', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 8.5}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.32}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 8.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-05', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f074f2347e5818a85ffd40e214b7428', 'public_url': None, 'request_id': 'e856588a-4214-49ef-8b87-f0a16f0cccee'}
2025-05-11 19:19:31,238 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:31] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:31,344 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 15.49 was successfully completed at Tamara using your e& money card ending with 4736. 
Date: 2025-05-06 11:30:46
You earned AED 0.15 cash rewards with this transaction.
Available balance: AED 375.48
Transaction ID: 140944316
2025-05-11 19:19:31,345 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 15.49 was successfully completed at Tamara using your e& money card ending with 4736. 
Date: 2025-05-06 11:30:46
You earned AED 0.15 cash rewards with this transaction.
Available balance: AED 375.48
Transaction ID: 140944316
2025-05-11 19:19:31,347 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:31,348 - __main__ - DEBUG - Extracted amount: 15.49
2025-05-11 19:19:31,349 - __main__ - DEBUG - Extracted merchant: Tamara
2025-05-11 19:19:31,349 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-06
2025-05-11 19:19:31,350 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:31,350 - __main__ - DEBUG - Final parsed data: amount=15.49, merchant=Tamara, date=2025-05-06, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:31,351 - __main__ - DEBUG - Parsed data: {'amount': 15.49, 'merchant': 'Tamara', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:31,351 - __main__ - DEBUG - Adding to Notion: {'amount': 15.49, 'merchant': 'Tamara', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:31,352 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:31,353 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'Tamara'}}]}, 'Amount': {'number': 15.49}, 'Date': {'date': {'start': '2025-05-06'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:31,359 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:33,161 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:33,163 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-814c-9d3e-db0b43a6223b', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 15.49}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 4.22}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 15.49}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'Tamara', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'Tamara', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/Tamara-1f074f2347e5814c9d3edb0b43a6223b', 'public_url': None, 'request_id': '3444b323-c418-448b-a18a-054ca4018a31'}
2025-05-11 19:19:33,169 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-814c-9d3e-db0b43a6223b', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 15.49}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 4.22}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 15.49}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'Tamara', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'Tamara', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/Tamara-1f074f2347e5814c9d3edb0b43a6223b', 'public_url': None, 'request_id': '3444b323-c418-448b-a18a-054ca4018a31'}
2025-05-11 19:19:33,174 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:33] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:33,274 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 14.44 was successfully completed at Tamara using your e& money card ending with 4736. 
Date: 2025-05-06 11:31:22
Available balance: AED 361.04
Transaction ID: 140944503
2025-05-11 19:19:33,275 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 14.44 was successfully completed at Tamara using your e& money card ending with 4736. 
Date: 2025-05-06 11:31:22
Available balance: AED 361.04
Transaction ID: 140944503
2025-05-11 19:19:33,276 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:33,276 - __main__ - DEBUG - Extracted amount: 14.44
2025-05-11 19:19:33,277 - __main__ - DEBUG - Extracted merchant: Tamara
2025-05-11 19:19:33,277 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-06
2025-05-11 19:19:33,278 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:33,279 - __main__ - DEBUG - Final parsed data: amount=14.44, merchant=Tamara, date=2025-05-06, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:33,279 - __main__ - DEBUG - Parsed data: {'amount': 14.44, 'merchant': 'Tamara', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:33,280 - __main__ - DEBUG - Adding to Notion: {'amount': 14.44, 'merchant': 'Tamara', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:33,281 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:33,281 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'Tamara'}}]}, 'Amount': {'number': 14.44}, 'Date': {'date': {'start': '2025-05-06'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:33,285 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:34,928 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:34,931 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-812b-a128-ecf22581562f', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 14.44}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.93}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 14.44}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'Tamara', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'Tamara', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/Tamara-1f074f2347e5812ba128ecf22581562f', 'public_url': None, 'request_id': '67708880-a968-4765-8186-3871a124b4cb'}
2025-05-11 19:19:34,943 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-812b-a128-ecf22581562f', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 14.44}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.93}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 14.44}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'Tamara', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'Tamara', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/Tamara-1f074f2347e5812ba128ecf22581562f', 'public_url': None, 'request_id': '67708880-a968-4765-8186-3871a124b4cb'}
2025-05-11 19:19:34,948 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:34] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:35,045 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 2.51 was successfully completed at Tamara using your e& money card ending with 4736. 
Date: 2025-05-06 11:31:51
Available balance: AED 358.53
Transaction ID: 140944646
2025-05-11 19:19:35,046 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 2.51 was successfully completed at Tamara using your e& money card ending with 4736. 
Date: 2025-05-06 11:31:51
Available balance: AED 358.53
Transaction ID: 140944646
2025-05-11 19:19:35,047 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:35,048 - __main__ - DEBUG - Extracted amount: 2.51
2025-05-11 19:19:35,048 - __main__ - DEBUG - Extracted merchant: Tamara
2025-05-11 19:19:35,049 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-06
2025-05-11 19:19:35,049 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:35,050 - __main__ - DEBUG - Final parsed data: amount=2.51, merchant=Tamara, date=2025-05-06, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:35,050 - __main__ - DEBUG - Parsed data: {'amount': 2.51, 'merchant': 'Tamara', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:35,051 - __main__ - DEBUG - Adding to Notion: {'amount': 2.51, 'merchant': 'Tamara', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:35,052 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:35,052 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'Tamara'}}]}, 'Amount': {'number': 2.51}, 'Date': {'date': {'start': '2025-05-06'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:35,055 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:44,244 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:44,247 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8100-aaab-da0fb190daf0', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.51}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 0.68}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 2.51}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'Tamara', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'Tamara', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/Tamara-1f074f2347e58100aaabda0fb190daf0', 'public_url': None, 'request_id': '6ea1a938-7882-4774-ae50-b56caa6695d3'}
2025-05-11 19:19:44,255 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8100-aaab-da0fb190daf0', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.51}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 0.68}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 2.51}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'Tamara', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'Tamara', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/Tamara-1f074f2347e58100aaabda0fb190daf0', 'public_url': None, 'request_id': '6ea1a938-7882-4774-ae50-b56caa6695d3'}
2025-05-11 19:19:44,259 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:44] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:44,346 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 8.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736. 
Date: 2025-05-06 13:59:11
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 350.03
Transaction ID: 140989277
2025-05-11 19:19:44,347 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 8.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736. 
Date: 2025-05-06 13:59:11
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 350.03
Transaction ID: 140989277
2025-05-11 19:19:44,348 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:44,349 - __main__ - DEBUG - Extracted amount: 8.5
2025-05-11 19:19:44,349 - __main__ - DEBUG - Extracted merchant: ANGELS KITCHEN DMCC
2025-05-11 19:19:44,350 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-06
2025-05-11 19:19:44,350 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:44,350 - __main__ - DEBUG - Final parsed data: amount=8.5, merchant=ANGELS KITCHEN DMCC, date=2025-05-06, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:44,351 - __main__ - DEBUG - Parsed data: {'amount': 8.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:44,352 - __main__ - DEBUG - Adding to Notion: {'amount': 8.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:44,353 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:44,354 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'ANGELS KITCHEN DMCC'}}]}, 'Amount': {'number': 8.5}, 'Date': {'date': {'start': '2025-05-06'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:44,357 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:56,598 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:56,606 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-819d-82de-eed43e4fcca4', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 8.5}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.32}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 8.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f074f2347e5819d82deeed43e4fcca4', 'public_url': None, 'request_id': 'd6c45ce9-2624-4123-af59-97d8a9834967'}
2025-05-11 19:19:56,612 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-819d-82de-eed43e4fcca4', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 8.5}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.32}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 8.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f074f2347e5819d82deeed43e4fcca4', 'public_url': None, 'request_id': 'd6c45ce9-2624-4123-af59-97d8a9834967'}
2025-05-11 19:19:56,617 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:56] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:56,745 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 21.98 was successfully completed at DAY TO DAY GENERAL TRA using your e& money card ending with 4736. 
Date: 2025-05-06 20:40:13
You earned AED 0.22 cash rewards with this transaction.
Available balance: AED 328.05
Transaction ID: 141124368
2025-05-11 19:19:56,746 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 21.98 was successfully completed at DAY TO DAY GENERAL TRA using your e& money card ending with 4736. 
Date: 2025-05-06 20:40:13
You earned AED 0.22 cash rewards with this transaction.
Available balance: AED 328.05
Transaction ID: 141124368
2025-05-11 19:19:56,748 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:56,748 - __main__ - DEBUG - Extracted amount: 21.98
2025-05-11 19:19:56,749 - __main__ - DEBUG - Extracted merchant: DAY TO DAY GENERAL TRA
2025-05-11 19:19:56,750 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-06
2025-05-11 19:19:56,751 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:56,752 - __main__ - DEBUG - Final parsed data: amount=21.98, merchant=DAY TO DAY GENERAL TRA, date=2025-05-06, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:56,752 - __main__ - DEBUG - Parsed data: {'amount': 21.98, 'merchant': 'DAY TO DAY GENERAL TRA', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:56,753 - __main__ - DEBUG - Adding to Notion: {'amount': 21.98, 'merchant': 'DAY TO DAY GENERAL TRA', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:56,754 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:56,754 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DAY TO DAY GENERAL TRA'}}]}, 'Amount': {'number': 21.98}, 'Date': {'date': {'start': '2025-05-06'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:56,759 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:19:58,620 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:19:58,622 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-81bd-83d8-c070f705f95b', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 21.98}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.99}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 21.98}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DAY TO DAY GENERAL TRA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DAY TO DAY GENERAL TRA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DAY-TO-DAY-GENERAL-TRA-1f074f2347e581bd83d8c070f705f95b', 'public_url': None, 'request_id': '944057da-69be-40ac-9c98-33d5bcbb8748'}
2025-05-11 19:19:58,630 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-81bd-83d8-c070f705f95b', 'created_time': '2025-05-11T15:19:00.000Z', 'last_edited_time': '2025-05-11T15:19:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 21.98}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.99}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 21.98}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DAY TO DAY GENERAL TRA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DAY TO DAY GENERAL TRA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DAY-TO-DAY-GENERAL-TRA-1f074f2347e581bd83d8c070f705f95b', 'public_url': None, 'request_id': '944057da-69be-40ac-9c98-33d5bcbb8748'}
2025-05-11 19:19:58,635 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:19:58] "POST /process HTTP/1.1" 200 -
2025-05-11 19:19:58,686 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.99 was successfully completed at DAY TO DAY GENERAL TRA using your e& money card ending with 4736. 
Date: 2025-05-06 20:41:03
You earned AED 0.08 cash rewards with this transaction.
Available balance: AED 320.06
Transaction ID: 141124679
2025-05-11 19:19:58,687 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 7.99 was successfully completed at DAY TO DAY GENERAL TRA using your e& money card ending with 4736. 
Date: 2025-05-06 20:41:03
You earned AED 0.08 cash rewards with this transaction.
Available balance: AED 320.06
Transaction ID: 141124679
2025-05-11 19:19:58,689 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:19:58,689 - __main__ - DEBUG - Extracted amount: 7.99
2025-05-11 19:19:58,690 - __main__ - DEBUG - Extracted merchant: DAY TO DAY GENERAL TRA
2025-05-11 19:19:58,690 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-06
2025-05-11 19:19:58,691 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:19:58,691 - __main__ - DEBUG - Final parsed data: amount=7.99, merchant=DAY TO DAY GENERAL TRA, date=2025-05-06, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:19:58,692 - __main__ - DEBUG - Parsed data: {'amount': 7.99, 'merchant': 'DAY TO DAY GENERAL TRA', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:58,693 - __main__ - DEBUG - Adding to Notion: {'amount': 7.99, 'merchant': 'DAY TO DAY GENERAL TRA', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:19:58,694 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:19:58,695 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DAY TO DAY GENERAL TRA'}}]}, 'Amount': {'number': 7.99}, 'Date': {'date': {'start': '2025-05-06'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:19:58,698 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:20:00,607 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:20:00,611 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8148-9f53-f1078fcd3ea3', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.99}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.18}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.99}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DAY TO DAY GENERAL TRA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DAY TO DAY GENERAL TRA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DAY-TO-DAY-GENERAL-TRA-1f074f2347e581489f53f1078fcd3ea3', 'public_url': None, 'request_id': 'b4c31160-d450-43a0-9695-549158126fc3'}
2025-05-11 19:20:00,623 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8148-9f53-f1078fcd3ea3', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.99}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.18}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.99}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DAY TO DAY GENERAL TRA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DAY TO DAY GENERAL TRA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DAY-TO-DAY-GENERAL-TRA-1f074f2347e581489f53f1078fcd3ea3', 'public_url': None, 'request_id': 'b4c31160-d450-43a0-9695-549158126fc3'}
2025-05-11 19:20:00,630 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:20:00] "POST /process HTTP/1.1" 200 -
2025-05-11 19:20:00,722 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 2.49 was successfully completed at CARREFOUR CITY BURJUMA using your e& money card ending with 4736. 
Date: 2025-05-06 20:46:37
You earned AED 0.02 cash rewards with this transaction.
Available balance: AED 317.57
Transaction ID: 141126959
2025-05-11 19:20:00,723 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 2.49 was successfully completed at CARREFOUR CITY BURJUMA using your e& money card ending with 4736. 
Date: 2025-05-06 20:46:37
You earned AED 0.02 cash rewards with this transaction.
Available balance: AED 317.57
Transaction ID: 141126959
2025-05-11 19:20:00,725 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:20:00,726 - __main__ - DEBUG - Extracted amount: 2.49
2025-05-11 19:20:00,726 - __main__ - DEBUG - Extracted merchant: CARREFOUR CITY BURJUMA
2025-05-11 19:20:00,727 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-06
2025-05-11 19:20:00,727 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:20:00,728 - __main__ - DEBUG - Final parsed data: amount=2.49, merchant=CARREFOUR CITY BURJUMA, date=2025-05-06, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:20:00,729 - __main__ - DEBUG - Parsed data: {'amount': 2.49, 'merchant': 'CARREFOUR CITY BURJUMA', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:00,729 - __main__ - DEBUG - Adding to Notion: {'amount': 2.49, 'merchant': 'CARREFOUR CITY BURJUMA', 'date': '2025-05-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:00,730 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:20:00,730 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'CARREFOUR CITY BURJUMA'}}]}, 'Amount': {'number': 2.49}, 'Date': {'date': {'start': '2025-05-06'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:20:00,732 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:20:02,715 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:20:02,717 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-81c6-8bc6-dc6a3fe592e1', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.49}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 0.68}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 2.49}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CARREFOUR CITY BURJUMA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CARREFOUR CITY BURJUMA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CARREFOUR-CITY-BURJUMA-1f074f2347e581c68bc6dc6a3fe592e1', 'public_url': None, 'request_id': '9ac7489c-9947-4c49-98a5-24ba5f490b66'}
2025-05-11 19:20:02,723 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-81c6-8bc6-dc6a3fe592e1', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.49}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 0.68}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 2.49}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CARREFOUR CITY BURJUMA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CARREFOUR CITY BURJUMA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CARREFOUR-CITY-BURJUMA-1f074f2347e581c68bc6dc6a3fe592e1', 'public_url': None, 'request_id': '9ac7489c-9947-4c49-98a5-24ba5f490b66'}
2025-05-11 19:20:02,727 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:20:02] "POST /process HTTP/1.1" 200 -
2025-05-11 19:20:02,752 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 80.00 was successfully completed at NOOR ALHARA GROCERY using your e& money card ending with 4736. 
Date: 2025-05-07 19:09:28
You earned AED 0.80 cash rewards with this transaction.
Available balance: AED 237.57
Transaction ID: 141439576
2025-05-11 19:20:02,753 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 80.00 was successfully completed at NOOR ALHARA GROCERY using your e& money card ending with 4736. 
Date: 2025-05-07 19:09:28
You earned AED 0.80 cash rewards with this transaction.
Available balance: AED 237.57
Transaction ID: 141439576
2025-05-11 19:20:02,754 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:20:02,754 - __main__ - DEBUG - Extracted amount: 80.0
2025-05-11 19:20:02,755 - __main__ - DEBUG - Extracted merchant: NOOR ALHARA GROCERY
2025-05-11 19:20:02,756 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-07
2025-05-11 19:20:02,757 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:20:02,757 - __main__ - DEBUG - Final parsed data: amount=80.0, merchant=NOOR ALHARA GROCERY, date=2025-05-07, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:20:02,758 - __main__ - DEBUG - Parsed data: {'amount': 80.0, 'merchant': 'NOOR ALHARA GROCERY', 'date': '2025-05-07', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:02,758 - __main__ - DEBUG - Adding to Notion: {'amount': 80.0, 'merchant': 'NOOR ALHARA GROCERY', 'date': '2025-05-07', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:02,759 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:20:02,760 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'NOOR ALHARA GROCERY'}}]}, 'Amount': {'number': 80.0}, 'Date': {'date': {'start': '2025-05-07'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:20:02,762 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:20:04,181 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:20:04,183 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8127-880b-e7b2f01feb3e', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 80}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 21.8}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 80}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-07', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NOOR ALHARA GROCERY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NOOR ALHARA GROCERY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NOOR-ALHARA-GROCERY-1f074f2347e58127880be7b2f01feb3e', 'public_url': None, 'request_id': '942347f9-0fb4-4a7e-823d-21155c97ad0e'}
2025-05-11 19:20:04,188 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8127-880b-e7b2f01feb3e', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 80}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 21.8}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 80}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-07', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NOOR ALHARA GROCERY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NOOR ALHARA GROCERY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NOOR-ALHARA-GROCERY-1f074f2347e58127880be7b2f01feb3e', 'public_url': None, 'request_id': '942347f9-0fb4-4a7e-823d-21155c97ad0e'}
2025-05-11 19:20:04,195 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:20:04] "POST /process HTTP/1.1" 200 -
2025-05-11 19:20:04,299 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 5.50 was successfully completed at CHOITHRAM T.CHOITHRA using your e& money card ending with 4736. 
Date: 2025-05-07 22:38:17
You earned AED 0.06 cash rewards with this transaction.
Available balance: AED 232.07
Transaction ID: 141520131
2025-05-11 19:20:04,300 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 5.50 was successfully completed at CHOITHRAM T.CHOITHRA using your e& money card ending with 4736. 
Date: 2025-05-07 22:38:17
You earned AED 0.06 cash rewards with this transaction.
Available balance: AED 232.07
Transaction ID: 141520131
2025-05-11 19:20:04,301 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:20:04,301 - __main__ - DEBUG - Extracted amount: 5.5
2025-05-11 19:20:04,302 - __main__ - DEBUG - Extracted merchant: CHOITHRAM T.CHOITHRA
2025-05-11 19:20:04,302 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-07
2025-05-11 19:20:04,303 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:20:04,303 - __main__ - DEBUG - Final parsed data: amount=5.5, merchant=CHOITHRAM T.CHOITHRA, date=2025-05-07, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:20:04,304 - __main__ - DEBUG - Parsed data: {'amount': 5.5, 'merchant': 'CHOITHRAM T.CHOITHRA', 'date': '2025-05-07', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:04,304 - __main__ - DEBUG - Adding to Notion: {'amount': 5.5, 'merchant': 'CHOITHRAM T.CHOITHRA', 'date': '2025-05-07', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:04,305 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:20:04,305 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'CHOITHRAM T.CHOITHRA'}}]}, 'Amount': {'number': 5.5}, 'Date': {'date': {'start': '2025-05-07'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:20:04,308 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:20:06,408 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:20:08,333 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-812a-bad4-d22ddae4a7ff', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.5}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.5}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 5.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-07', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CHOITHRAM T.CHOITHRA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CHOITHRAM T.CHOITHRA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CHOITHRAM-T-CHOITHRA-1f074f2347e5812abad4d22ddae4a7ff', 'public_url': None, 'request_id': '2def3674-51d2-4e21-8e76-ed931dbf18d9'}
2025-05-11 19:20:08,341 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-812a-bad4-d22ddae4a7ff', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.5}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.5}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 5.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-07', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CHOITHRAM T.CHOITHRA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CHOITHRAM T.CHOITHRA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CHOITHRAM-T-CHOITHRA-1f074f2347e5812abad4d22ddae4a7ff', 'public_url': None, 'request_id': '2def3674-51d2-4e21-8e76-ed931dbf18d9'}
2025-05-11 19:20:08,346 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:20:08] "POST /process HTTP/1.1" 200 -
2025-05-11 19:20:08,397 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 39.20 was successfully completed at Noon Minutes using your e& money card ending with 4736. 
Date: 2025-05-10 11:18:18
You earned AED 0.39 cash rewards with this transaction.
Available balance: AED 182.87
Transaction ID: 142395302
2025-05-11 19:20:08,399 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 39.20 was successfully completed at Noon Minutes using your e& money card ending with 4736. 
Date: 2025-05-10 11:18:18
You earned AED 0.39 cash rewards with this transaction.
Available balance: AED 182.87
Transaction ID: 142395302
2025-05-11 19:20:08,401 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:20:08,401 - __main__ - DEBUG - Extracted amount: 39.2
2025-05-11 19:20:08,402 - __main__ - DEBUG - Extracted merchant: Noon Minutes
2025-05-11 19:20:08,402 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-10
2025-05-11 19:20:08,403 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:20:08,403 - __main__ - DEBUG - Final parsed data: amount=39.2, merchant=Noon Minutes, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:20:08,404 - __main__ - DEBUG - Parsed data: {'amount': 39.2, 'merchant': 'Noon Minutes', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:08,404 - __main__ - DEBUG - Adding to Notion: {'amount': 39.2, 'merchant': 'Noon Minutes', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:08,405 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:20:08,406 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'Noon Minutes'}}]}, 'Amount': {'number': 39.2}, 'Date': {'date': {'start': '2025-05-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:20:08,408 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:20:09,755 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:20:09,757 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-818c-8607-cc2b74cbf06e', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 39.2}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 10.68}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 39.2}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'Noon Minutes', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'Noon Minutes', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/Noon-Minutes-1f074f2347e5818c8607cc2b74cbf06e', 'public_url': None, 'request_id': 'bef986f7-ad8f-43e8-9218-c09fd128175e'}
2025-05-11 19:20:09,763 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-818c-8607-cc2b74cbf06e', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 39.2}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 10.68}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 39.2}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'Noon Minutes', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'Noon Minutes', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/Noon-Minutes-1f074f2347e5818c8607cc2b74cbf06e', 'public_url': None, 'request_id': 'bef986f7-ad8f-43e8-9218-c09fd128175e'}
2025-05-11 19:20:09,766 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:20:09] "POST /process HTTP/1.1" 200 -
2025-05-11 19:20:09,818 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 20.00 was successfully completed at GEIDEA*BROOK FOODS LLC using your e& money card ending with 4736. 
Date: 2025-05-10 16:38:01
You earned AED 0.10 cash rewards with this transaction.
Available balance: AED 162.87
Transaction ID: 142493464
2025-05-11 19:20:09,819 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 20.00 was successfully completed at GEIDEA*BROOK FOODS LLC using your e& money card ending with 4736. 
Date: 2025-05-10 16:38:01
You earned AED 0.10 cash rewards with this transaction.
Available balance: AED 162.87
Transaction ID: 142493464
2025-05-11 19:20:09,820 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:20:09,820 - __main__ - DEBUG - Extracted amount: 20.0
2025-05-11 19:20:09,820 - __main__ - DEBUG - Extracted merchant: GEIDEA*BROOK FOODS LLC
2025-05-11 19:20:09,821 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-10
2025-05-11 19:20:09,822 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:20:09,822 - __main__ - DEBUG - Final parsed data: amount=20.0, merchant=GEIDEA*BROOK FOODS LLC, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:20:09,823 - __main__ - DEBUG - Parsed data: {'amount': 20.0, 'merchant': 'GEIDEA*BROOK FOODS LLC', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:09,823 - __main__ - DEBUG - Adding to Notion: {'amount': 20.0, 'merchant': 'GEIDEA*BROOK FOODS LLC', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:20:09,823 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:20:09,824 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'GEIDEA*BROOK FOODS LLC'}}]}, 'Amount': {'number': 20.0}, 'Date': {'date': {'start': '2025-05-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:20:09,826 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:20:11,107 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:20:11,109 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-814d-8840-ce5040bf0229', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 20}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.45}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 20}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'GEIDEA*BROOK FOODS LLC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'GEIDEA*BROOK FOODS LLC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/GEIDEA-BROOK-FOODS-LLC-1f074f2347e5814d8840ce5040bf0229', 'public_url': None, 'request_id': 'ee907c7f-489e-4569-a624-2565e8884f0e'}
2025-05-11 19:20:11,114 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-814d-8840-ce5040bf0229', 'created_time': '2025-05-11T15:20:00.000Z', 'last_edited_time': '2025-05-11T15:20:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 20}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.45}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 20}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'GEIDEA*BROOK FOODS LLC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'GEIDEA*BROOK FOODS LLC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/GEIDEA-BROOK-FOODS-LLC-1f074f2347e5814d8840ce5040bf0229', 'public_url': None, 'request_id': 'ee907c7f-489e-4569-a624-2565e8884f0e'}
2025-05-11 19:20:11,118 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:20:11] "POST /process HTTP/1.1" 200 -
2025-05-11 19:23:28,420 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:23:28] "GET / HTTP/1.1" 200 -
2025-05-11 19:23:28,461 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:23:28] "GET /qr HTTP/1.1" 200 -
2025-05-11 19:25:53,158 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:25:53] "GET / HTTP/1.1" 200 -
2025-05-11 19:28:04,821 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:28:04] "GET / HTTP/1.1" 200 -
2025-05-11 19:29:01,882 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:29:01] "GET / HTTP/1.1" 200 -
2025-05-11 19:29:01,914 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:29:01] "GET /qr HTTP/1.1" 200 -
2025-05-11 19:30:08,017 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:30:08] "GET / HTTP/1.1" 200 -
2025-05-11 19:30:10,542 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:30:10] "GET / HTTP/1.1" 200 -
2025-05-11 19:31:20,803 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:31:20] "GET / HTTP/1.1" 200 -
2025-05-11 19:32:33,976 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:32:33] "GET / HTTP/1.1" 200 -
2025-05-11 19:32:38,987 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:32:38] "GET / HTTP/1.1" 200 -
2025-05-11 19:32:59,444 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:32:59] "[32mGET /logout HTTP/1.1[0m" 302 -
2025-05-11 19:32:59,481 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:32:59] "GET /login HTTP/1.1" 200 -
2025-05-11 19:33:04,702 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:33:04] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-11 19:33:04,753 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:33:04] "GET / HTTP/1.1" 200 -
2025-05-11 19:33:18,356 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 19:33:18,356 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 19:33:18,371 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:33:18,371 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-11 19:33:18,371 - __main__ - DEBUG - Extracted merchant: DUNKIN
2025-05-11 19:33:18,371 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-10
2025-05-11 19:33:18,371 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:33:18,371 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=DUNKIN, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:33:18,376 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:33:18,376 - __main__ - DEBUG - Adding to Notion: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:33:18,377 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:33:18,377 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DUNKIN'}}]}, 'Amount': {'number': 7.0}, 'Date': {'date': {'start': '2025-05-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:33:18,377 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:33:22,239 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:33:22,255 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-811c-9d4f-d6744ce6bdd4', 'created_time': '2025-05-11T15:33:00.000Z', 'last_edited_time': '2025-05-11T15:33:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e5811c9d4fd6744ce6bdd4', 'public_url': None, 'request_id': '7cf383a9-dd9b-4774-8088-5244d8466ee8'}
2025-05-11 19:33:22,261 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-811c-9d4f-d6744ce6bdd4', 'created_time': '2025-05-11T15:33:00.000Z', 'last_edited_time': '2025-05-11T15:33:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e5811c9d4fd6744ce6bdd4', 'public_url': None, 'request_id': '7cf383a9-dd9b-4774-8088-5244d8466ee8'}
2025-05-11 19:33:22,264 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:33:22] "POST /process HTTP/1.1" 200 -
2025-05-11 19:34:24,469 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:34:24] "GET / HTTP/1.1" 200 -
2025-05-11 19:34:24,518 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:34:24] "GET /qr HTTP/1.1" 200 -
2025-05-11 19:35:20,208 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 19:35:21,024 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 19:35:21,041 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 19:35:24,720 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 19:35:24,720 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 19:35:46,866 - werkzeug - INFO -  * Detected change in 'c:\\Users\\Windows 11\\OneDrive\\Laptop\\Github\\notion-automation\\app.py', reloading
2025-05-11 19:35:47,731 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 19:35:47,750 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 19:35:51,028 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 19:35:51,028 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 19:35:55,201 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:35:55] "GET / HTTP/1.1" 200 -
2025-05-11 19:36:00,938 - __main__ - DEBUG - Processing message: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 19:36:00,953 - __main__ - DEBUG - Starting SMS parsing for text: Dear PHYO, a purchase of AED 7.00 was successfully completed at DUNKIN using your e& money card ending with 4736. 
Date: 2025-05-10 21:59:24
You earned AED 0.04 cash rewards with this transaction.
Available balance: AED 155.87
Transaction ID: 142616666
2025-05-11 19:36:00,954 - __main__ - DEBUG - Detected e&money message
2025-05-11 19:36:00,954 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-11 19:36:00,954 - __main__ - DEBUG - Extracted merchant: DUNKIN
2025-05-11 19:36:00,954 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-05-10
2025-05-11 19:36:00,954 - __main__ - DEBUG - Added E&money account ID
2025-05-11 19:36:00,954 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=DUNKIN, date=2025-05-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-11 19:36:00,961 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:36:00,962 - __main__ - DEBUG - Adding to Notion: {'amount': 7.0, 'merchant': 'DUNKIN', 'date': '2025-05-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-11 19:36:00,963 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-11 19:36:00,963 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DUNKIN'}}]}, 'Amount': {'number': 7.0}, 'Date': {'date': {'start': '2025-05-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-11 19:36:00,963 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-11 19:36:03,580 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-11 19:36:03,596 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8137-a419-fd4d7358003c', 'created_time': '2025-05-11T15:36:00.000Z', 'last_edited_time': '2025-05-11T15:36:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e58137a419fd4d7358003c', 'public_url': None, 'request_id': 'c25cfcd7-4219-4c91-877b-44ac1988ae38'}
2025-05-11 19:36:03,596 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f074f23-47e5-8137-a419-fd4d7358003c', 'created_time': '2025-05-11T15:36:00.000Z', 'last_edited_time': '2025-05-11T15:36:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'May'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-05-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUNKIN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUNKIN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUNKIN-1f074f2347e58137a419fd4d7358003c', 'public_url': None, 'request_id': 'c25cfcd7-4219-4c91-877b-44ac1988ae38'}
2025-05-11 19:36:03,605 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 19:36:03] "POST /process HTTP/1.1" 200 -
2025-05-11 19:45:27,680 - werkzeug - INFO -  * Restarting with stat
2025-05-11 19:45:28,763 - werkzeug - WARNING -  * Debugger is active!
2025-05-11 19:45:28,777 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-11 19:45:32,658 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-11 19:45:32,659 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-11 19:45:34,009 - werkzeug - INFO - 192.168.1.99 - - [11/May/2025 19:45:34] "GET / HTTP/1.1" 200 -
2025-05-11 19:45:34,106 - werkzeug - INFO - 192.168.1.99 - - [11/May/2025 19:45:34] "GET /qr HTTP/1.1" 200 -
2025-05-11 23:34:48,758 - werkzeug - INFO - 192.168.1.139 - - [11/May/2025 23:34:48] "[32mGET / HTTP/1.1[0m" 302 -
2025-05-12 14:36:47,458 - werkzeug - INFO -  * Restarting with stat
2025-05-12 14:36:48,076 - werkzeug - WARNING -  * Debugger is active!
2025-05-12 14:36:48,081 - werkzeug - INFO -  * Debugger PIN: 105-870-001
2025-05-12 14:36:52,300 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-05-12 14:36:52,316 - werkzeug - INFO -  * Running on http://192.168.1.99:8080/ (Press CTRL+C to quit)
2025-05-12 14:37:30,271 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:37:30] "[32mGET / HTTP/1.1[0m" 302 -
2025-05-12 14:37:30,514 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:37:30] "GET /login?next=%2F HTTP/1.1" 200 -
2025-05-12 14:37:31,316 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:37:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-05-12 14:37:54,252 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:37:54] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-12 14:37:54,311 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:37:54] "GET / HTTP/1.1" 200 -
2025-05-12 14:37:54,506 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:37:54] "GET /qr HTTP/1.1" 200 -
2025-05-12 14:45:00,850 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 65.00 was successfully completed at HOTPOT MASTER DMCC using your e& money card ending with 4736.
Date: 2025-03-28 22:39:14
You earned AED 0.33 cash rewards with this transaction
Available balance: AED 544.00
Transaction ID: 128219440
2025-05-12 14:45:00,852 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 65.00 was successfully completed at HOTPOT MASTER DMCC using your e& money card ending with 4736.
Date: 2025-03-28 22:39:14
You earned AED 0.33 cash rewards with this transaction
Available balance: AED 544.00
Transaction ID: 128219440
2025-05-12 14:45:00,854 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:00,855 - __main__ - DEBUG - Extracted amount: 65.0
2025-05-12 14:45:00,856 - __main__ - DEBUG - Extracted merchant: HOTPOT MASTER DMCC
2025-05-12 14:45:00,863 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-28
2025-05-12 14:45:00,864 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:00,864 - __main__ - DEBUG - Final parsed data: amount=65.0, merchant=HOTPOT MASTER DMCC, date=2025-03-28, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:00,865 - __main__ - DEBUG - Parsed data: {'amount': 65.0, 'merchant': 'HOTPOT MASTER DMCC', 'date': '2025-03-28', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:00,866 - __main__ - DEBUG - Adding to Notion: {'amount': 65.0, 'merchant': 'HOTPOT MASTER DMCC', 'date': '2025-03-28', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:00,867 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:00,867 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'HOTPOT MASTER DMCC'}}]}, 'Amount': {'number': 65.0}, 'Date': {'date': {'start': '2025-03-28'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:00,877 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:05,574 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:05,576 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-812a-b7f2-e4ea450965b5', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 17.71}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 65}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-28', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'HOTPOT MASTER DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'HOTPOT MASTER DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/HOTPOT-MASTER-DMCC-1f174f2347e5812ab7f2e4ea450965b5', 'public_url': None, 'request_id': 'fc2fd40e-299f-4970-b399-92b7762a21f2'}
2025-05-12 14:45:05,585 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-812a-b7f2-e4ea450965b5', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 17.71}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 65}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-28', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'HOTPOT MASTER DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'HOTPOT MASTER DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/HOTPOT-MASTER-DMCC-1f174f2347e5812ab7f2e4ea450965b5', 'public_url': None, 'request_id': 'fc2fd40e-299f-4970-b399-92b7762a21f2'}
2025-05-12 14:45:05,593 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:05] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:05,674 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 16.50 was successfully completed at CARREFOUR BURJUMAN using your e& money card ending with 4736.
Date: 2025-03-29 23:27:34
You earned AED 0.17 cash rewards with this transaction
Available balance: AED 527.50
Transaction ID: 128631634
2025-05-12 14:45:05,674 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 16.50 was successfully completed at CARREFOUR BURJUMAN using your e& money card ending with 4736.
Date: 2025-03-29 23:27:34
You earned AED 0.17 cash rewards with this transaction
Available balance: AED 527.50
Transaction ID: 128631634
2025-05-12 14:45:05,674 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:05,674 - __main__ - DEBUG - Extracted amount: 16.5
2025-05-12 14:45:05,674 - __main__ - DEBUG - Extracted merchant: CARREFOUR BURJUMAN
2025-05-12 14:45:05,674 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-29
2025-05-12 14:45:05,674 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:05,674 - __main__ - DEBUG - Final parsed data: amount=16.5, merchant=CARREFOUR BURJUMAN, date=2025-03-29, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:05,689 - __main__ - DEBUG - Parsed data: {'amount': 16.5, 'merchant': 'CARREFOUR BURJUMAN', 'date': '2025-03-29', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:05,690 - __main__ - DEBUG - Adding to Notion: {'amount': 16.5, 'merchant': 'CARREFOUR BURJUMAN', 'date': '2025-03-29', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:05,727 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:05,728 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'CARREFOUR BURJUMAN'}}]}, 'Amount': {'number': 16.5}, 'Date': {'date': {'start': '2025-03-29'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:05,742 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:07,465 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:07,467 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81d1-9864-d315bdfd3b17', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 4.5}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 16.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-29', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CARREFOUR BURJUMAN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CARREFOUR BURJUMAN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CARREFOUR-BURJUMAN-1f174f2347e581d19864d315bdfd3b17', 'public_url': None, 'request_id': '9d605ce9-aaf4-4db3-914c-1733feb69063'}
2025-05-12 14:45:07,477 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81d1-9864-d315bdfd3b17', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 4.5}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 16.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-29', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CARREFOUR BURJUMAN', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CARREFOUR BURJUMAN', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CARREFOUR-BURJUMAN-1f174f2347e581d19864d315bdfd3b17', 'public_url': None, 'request_id': '9d605ce9-aaf4-4db3-914c-1733feb69063'}
2025-05-12 14:45:07,479 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:07] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:07,623 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 49.75 was successfully completed at TABBY FZ LLC using your e& money card ending with 4736.
Date: 2025-03-30 01:40:19
Available balance: AED 477.75
Transaction ID: 128676544
2025-05-12 14:45:07,625 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 49.75 was successfully completed at TABBY FZ LLC using your e& money card ending with 4736.
Date: 2025-03-30 01:40:19
Available balance: AED 477.75
Transaction ID: 128676544
2025-05-12 14:45:07,627 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:07,628 - __main__ - DEBUG - Extracted amount: 49.75
2025-05-12 14:45:07,628 - __main__ - DEBUG - Extracted merchant: TABBY FZ LLC
2025-05-12 14:45:07,629 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-30
2025-05-12 14:45:07,630 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:07,630 - __main__ - DEBUG - Final parsed data: amount=49.75, merchant=TABBY FZ LLC, date=2025-03-30, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:07,632 - __main__ - DEBUG - Parsed data: {'amount': 49.75, 'merchant': 'TABBY FZ LLC', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:07,633 - __main__ - DEBUG - Adding to Notion: {'amount': 49.75, 'merchant': 'TABBY FZ LLC', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:07,634 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:07,635 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'TABBY FZ LLC'}}]}, 'Amount': {'number': 49.75}, 'Date': {'date': {'start': '2025-03-30'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:07,641 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:09,329 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:09,336 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-815e-a406-f7968f4c2590', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 13.56}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 49.75}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'TABBY FZ LLC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'TABBY FZ LLC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/TABBY-FZ-LLC-1f174f2347e5815ea406f7968f4c2590', 'public_url': None, 'request_id': 'd1b7ee86-b89f-4728-9270-e8eb1bf730c7'}
2025-05-12 14:45:09,344 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-815e-a406-f7968f4c2590', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 13.56}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 49.75}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'TABBY FZ LLC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'TABBY FZ LLC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/TABBY-FZ-LLC-1f174f2347e5815ea406f7968f4c2590', 'public_url': None, 'request_id': 'd1b7ee86-b89f-4728-9270-e8eb1bf730c7'}
2025-05-12 14:45:09,351 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:09] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:09,454 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 18.50 was successfully completed at PEOPLE EXPRESS SUPERMA using your e& money card ending with 4736.
Date: 2025-03-30 17:15:20
You earned AED 0.19 cash rewards with this transaction
Available balance: AED 459.25
Transaction ID: 128874663
2025-05-12 14:45:09,456 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 18.50 was successfully completed at PEOPLE EXPRESS SUPERMA using your e& money card ending with 4736.
Date: 2025-03-30 17:15:20
You earned AED 0.19 cash rewards with this transaction
Available balance: AED 459.25
Transaction ID: 128874663
2025-05-12 14:45:09,456 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:09,456 - __main__ - DEBUG - Extracted amount: 18.5
2025-05-12 14:45:09,456 - __main__ - DEBUG - Extracted merchant: PEOPLE EXPRESS SUPERMA
2025-05-12 14:45:09,456 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-30
2025-05-12 14:45:09,456 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:09,456 - __main__ - DEBUG - Final parsed data: amount=18.5, merchant=PEOPLE EXPRESS SUPERMA, date=2025-03-30, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:09,456 - __main__ - DEBUG - Parsed data: {'amount': 18.5, 'merchant': 'PEOPLE EXPRESS SUPERMA', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:09,456 - __main__ - DEBUG - Adding to Notion: {'amount': 18.5, 'merchant': 'PEOPLE EXPRESS SUPERMA', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:09,463 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:09,464 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'PEOPLE EXPRESS SUPERMA'}}]}, 'Amount': {'number': 18.5}, 'Date': {'date': {'start': '2025-03-30'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:09,468 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:12,476 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:12,478 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81b6-9a00-d5af31dea171', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.04}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 18.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'PEOPLE EXPRESS SUPERMA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'PEOPLE EXPRESS SUPERMA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/PEOPLE-EXPRESS-SUPERMA-1f174f2347e581b69a00d5af31dea171', 'public_url': None, 'request_id': 'c75bd2f5-a05a-49bc-8fd9-0248bab04f01'}
2025-05-12 14:45:12,489 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81b6-9a00-d5af31dea171', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.04}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 18.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'PEOPLE EXPRESS SUPERMA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'PEOPLE EXPRESS SUPERMA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/PEOPLE-EXPRESS-SUPERMA-1f174f2347e581b69a00d5af31dea171', 'public_url': None, 'request_id': 'c75bd2f5-a05a-49bc-8fd9-0248bab04f01'}
2025-05-12 14:45:12,497 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:12] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:12,626 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 20.00 was successfully completed at RTA DUBAI METRO TVM BU using your e& money card ending with 4736.
Date: 2025-03-30 17:27:18
You earned AED 0.20 cash rewards with this transaction
Available balance: AED 439.25
Transaction ID: 128877814
2025-05-12 14:45:12,628 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 20.00 was successfully completed at RTA DUBAI METRO TVM BU using your e& money card ending with 4736.
Date: 2025-03-30 17:27:18
You earned AED 0.20 cash rewards with this transaction
Available balance: AED 439.25
Transaction ID: 128877814
2025-05-12 14:45:12,630 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:12,631 - __main__ - DEBUG - Extracted amount: 20.0
2025-05-12 14:45:12,632 - __main__ - DEBUG - Extracted merchant: RTA DUBAI METRO TVM BU
2025-05-12 14:45:12,633 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-30
2025-05-12 14:45:12,634 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:12,634 - __main__ - DEBUG - Final parsed data: amount=20.0, merchant=RTA DUBAI METRO TVM BU, date=2025-03-30, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:12,635 - __main__ - DEBUG - Parsed data: {'amount': 20.0, 'merchant': 'RTA DUBAI METRO TVM BU', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:12,636 - __main__ - DEBUG - Adding to Notion: {'amount': 20.0, 'merchant': 'RTA DUBAI METRO TVM BU', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:12,637 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:12,638 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'RTA DUBAI METRO TVM BU'}}]}, 'Amount': {'number': 20.0}, 'Date': {'date': {'start': '2025-03-30'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:12,644 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:14,432 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:14,432 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-818d-99c3-c2bfb5b27d77', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.45}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 20}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'RTA DUBAI METRO TVM BU', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'RTA DUBAI METRO TVM BU', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/RTA-DUBAI-METRO-TVM-BU-1f174f2347e5818d99c3c2bfb5b27d77', 'public_url': None, 'request_id': '71490492-3d5f-4048-907b-a4eda39e35bd'}
2025-05-12 14:45:14,446 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-818d-99c3-c2bfb5b27d77', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.45}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 20}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'RTA DUBAI METRO TVM BU', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'RTA DUBAI METRO TVM BU', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/RTA-DUBAI-METRO-TVM-BU-1f174f2347e5818d99c3c2bfb5b27d77', 'public_url': None, 'request_id': '71490492-3d5f-4048-907b-a4eda39e35bd'}
2025-05-12 14:45:14,453 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:14] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:14,573 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 12.00 was successfully completed at BRANDS FOR LESS using your e& money card ending with 4736.
Date: 2025-03-30 18:46:59
You earned AED 0.12 cash rewards with this transaction
Available balance: AED 427.25
Transaction ID: 128901080
2025-05-12 14:45:14,575 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 12.00 was successfully completed at BRANDS FOR LESS using your e& money card ending with 4736.
Date: 2025-03-30 18:46:59
You earned AED 0.12 cash rewards with this transaction
Available balance: AED 427.25
Transaction ID: 128901080
2025-05-12 14:45:14,577 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:14,578 - __main__ - DEBUG - Extracted amount: 12.0
2025-05-12 14:45:14,579 - __main__ - DEBUG - Extracted merchant: BRANDS FOR LESS
2025-05-12 14:45:14,580 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-30
2025-05-12 14:45:14,582 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:14,583 - __main__ - DEBUG - Final parsed data: amount=12.0, merchant=BRANDS FOR LESS, date=2025-03-30, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:14,584 - __main__ - DEBUG - Parsed data: {'amount': 12.0, 'merchant': 'BRANDS FOR LESS', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:14,585 - __main__ - DEBUG - Adding to Notion: {'amount': 12.0, 'merchant': 'BRANDS FOR LESS', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:14,587 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:14,588 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'BRANDS FOR LESS'}}]}, 'Amount': {'number': 12.0}, 'Date': {'date': {'start': '2025-03-30'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:14,594 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:16,515 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:16,517 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81d1-bee9-e4f7c90fe96d', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.27}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 12}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'BRANDS FOR LESS', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'BRANDS FOR LESS', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/BRANDS-FOR-LESS-1f174f2347e581d1bee9e4f7c90fe96d', 'public_url': None, 'request_id': '944d64a9-04a3-43ff-a92e-af9ff30c32af'}
2025-05-12 14:45:16,524 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81d1-bee9-e4f7c90fe96d', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.27}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 12}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'BRANDS FOR LESS', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'BRANDS FOR LESS', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/BRANDS-FOR-LESS-1f174f2347e581d1bee9e4f7c90fe96d', 'public_url': None, 'request_id': '944d64a9-04a3-43ff-a92e-af9ff30c32af'}
2025-05-12 14:45:16,531 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:16] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:16,619 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 10.00 was successfully completed at CROSS STITCH TRADING L using your e& money card ending with 4736.
Date: 2025-03-30 21:17:04
You earned AED 0.10 cash rewards with this transaction
Available balance: AED 417.15
Transaction ID: 128951059
2025-05-12 14:45:16,621 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 10.00 was successfully completed at CROSS STITCH TRADING L using your e& money card ending with 4736.
Date: 2025-03-30 21:17:04
You earned AED 0.10 cash rewards with this transaction
Available balance: AED 417.15
Transaction ID: 128951059
2025-05-12 14:45:16,623 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:16,623 - __main__ - DEBUG - Extracted amount: 10.0
2025-05-12 14:45:16,624 - __main__ - DEBUG - Extracted merchant: CROSS STITCH TRADING L
2025-05-12 14:45:16,625 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-30
2025-05-12 14:45:16,625 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:16,626 - __main__ - DEBUG - Final parsed data: amount=10.0, merchant=CROSS STITCH TRADING L, date=2025-03-30, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:16,626 - __main__ - DEBUG - Parsed data: {'amount': 10.0, 'merchant': 'CROSS STITCH TRADING L', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:16,627 - __main__ - DEBUG - Adding to Notion: {'amount': 10.0, 'merchant': 'CROSS STITCH TRADING L', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:16,628 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:16,629 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'CROSS STITCH TRADING L'}}]}, 'Amount': {'number': 10.0}, 'Date': {'date': {'start': '2025-03-30'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:16,633 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:24,621 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:24,623 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81df-bdb9-d68f1d2bbb31', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.72}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 10}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CROSS STITCH TRADING L', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CROSS STITCH TRADING L', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CROSS-STITCH-TRADING-L-1f174f2347e581dfbdb9d68f1d2bbb31', 'public_url': None, 'request_id': '9131bdce-d3bc-48df-be83-3e707e69e10c'}
2025-05-12 14:45:24,633 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81df-bdb9-d68f1d2bbb31', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.72}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 10}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CROSS STITCH TRADING L', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CROSS STITCH TRADING L', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CROSS-STITCH-TRADING-L-1f174f2347e581dfbdb9d68f1d2bbb31', 'public_url': None, 'request_id': '9131bdce-d3bc-48df-be83-3e707e69e10c'}
2025-05-12 14:45:24,641 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:24] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:24,707 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 4.00 was successfully completed at HAMDULLAH KHAN BAKERY using your e& money card ending with 4736.
Date: 2025-03-30 22:01:58
You earned AED 0.04 cash rewards with this transaction
Available balance: AED 413.15
Transaction ID: 128965324
2025-05-12 14:45:24,707 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 4.00 was successfully completed at HAMDULLAH KHAN BAKERY using your e& money card ending with 4736.
Date: 2025-03-30 22:01:58
You earned AED 0.04 cash rewards with this transaction
Available balance: AED 413.15
Transaction ID: 128965324
2025-05-12 14:45:24,707 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:24,707 - __main__ - DEBUG - Extracted amount: 4.0
2025-05-12 14:45:24,721 - __main__ - DEBUG - Extracted merchant: HAMDULLAH KHAN BAKERY
2025-05-12 14:45:24,722 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-30
2025-05-12 14:45:24,723 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:24,723 - __main__ - DEBUG - Final parsed data: amount=4.0, merchant=HAMDULLAH KHAN BAKERY, date=2025-03-30, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:24,725 - __main__ - DEBUG - Parsed data: {'amount': 4.0, 'merchant': 'HAMDULLAH KHAN BAKERY', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:24,726 - __main__ - DEBUG - Adding to Notion: {'amount': 4.0, 'merchant': 'HAMDULLAH KHAN BAKERY', 'date': '2025-03-30', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:24,727 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:24,727 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'HAMDULLAH KHAN BAKERY'}}]}, 'Amount': {'number': 4.0}, 'Date': {'date': {'start': '2025-03-30'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:24,733 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:27,908 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:27,912 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8172-9cbe-c340df745d19', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.09}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 4}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'HAMDULLAH KHAN BAKERY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'HAMDULLAH KHAN BAKERY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/HAMDULLAH-KHAN-BAKERY-1f174f2347e581729cbec340df745d19', 'public_url': None, 'request_id': 'ff3e3e09-616d-4061-83c3-ef1465bf7b30'}
2025-05-12 14:45:27,932 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8172-9cbe-c340df745d19', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.09}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 4}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-30', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'HAMDULLAH KHAN BAKERY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'HAMDULLAH KHAN BAKERY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/HAMDULLAH-KHAN-BAKERY-1f174f2347e581729cbec340df745d19', 'public_url': None, 'request_id': 'ff3e3e09-616d-4061-83c3-ef1465bf7b30'}
2025-05-12 14:45:27,940 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:27] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:27,980 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 12.98 was successfully completed at DAY TO DAY GENERAL TRD using your e& money card ending with 4736.
Date: 2025-03-31 14:30:54
You earned AED 0.13 cash rewards with this transaction
Available balance: AED 400.17
Transaction ID: 129150561
2025-05-12 14:45:27,982 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 12.98 was successfully completed at DAY TO DAY GENERAL TRD using your e& money card ending with 4736.
Date: 2025-03-31 14:30:54
You earned AED 0.13 cash rewards with this transaction
Available balance: AED 400.17
Transaction ID: 129150561
2025-05-12 14:45:27,983 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:27,983 - __main__ - DEBUG - Extracted amount: 12.98
2025-05-12 14:45:27,983 - __main__ - DEBUG - Extracted merchant: DAY TO DAY GENERAL TRD
2025-05-12 14:45:27,984 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-31
2025-05-12 14:45:27,984 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:27,985 - __main__ - DEBUG - Final parsed data: amount=12.98, merchant=DAY TO DAY GENERAL TRD, date=2025-03-31, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:27,986 - __main__ - DEBUG - Parsed data: {'amount': 12.98, 'merchant': 'DAY TO DAY GENERAL TRD', 'date': '2025-03-31', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:27,986 - __main__ - DEBUG - Adding to Notion: {'amount': 12.98, 'merchant': 'DAY TO DAY GENERAL TRD', 'date': '2025-03-31', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:27,987 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:27,988 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DAY TO DAY GENERAL TRD'}}]}, 'Amount': {'number': 12.98}, 'Date': {'date': {'start': '2025-03-31'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:27,991 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:29,428 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:29,429 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-810c-9913-f148f8bc8b73', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.54}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 12.98}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-31', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DAY TO DAY GENERAL TRD', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DAY TO DAY GENERAL TRD', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DAY-TO-DAY-GENERAL-TRD-1f174f2347e5810c9913f148f8bc8b73', 'public_url': None, 'request_id': '3c4d2cd2-44fb-4c46-b800-a4007ef9c623'}
2025-05-12 14:45:29,436 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-810c-9913-f148f8bc8b73', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.54}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 12.98}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-31', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DAY TO DAY GENERAL TRD', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DAY TO DAY GENERAL TRD', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DAY-TO-DAY-GENERAL-TRD-1f174f2347e5810c9913f148f8bc8b73', 'public_url': None, 'request_id': '3c4d2cd2-44fb-4c46-b800-a4007ef9c623'}
2025-05-12 14:45:29,444 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:29] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:29,470 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 41.65 was successfully completed at AL MADINA MARKET 4 using your e& money card ending with 4736.
Date: 2025-03-31 15:03:17
You earned AED 0.42 cash rewards with this transaction
Available balance: AED 358.52
Transaction ID: 129159872
2025-05-12 14:45:29,472 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 41.65 was successfully completed at AL MADINA MARKET 4 using your e& money card ending with 4736.
Date: 2025-03-31 15:03:17
You earned AED 0.42 cash rewards with this transaction
Available balance: AED 358.52
Transaction ID: 129159872
2025-05-12 14:45:29,474 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:29,474 - __main__ - DEBUG - Extracted amount: 41.65
2025-05-12 14:45:29,474 - __main__ - DEBUG - Extracted merchant: AL MADINA MARKET 4
2025-05-12 14:45:29,475 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-31
2025-05-12 14:45:29,475 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:29,476 - __main__ - DEBUG - Final parsed data: amount=41.65, merchant=AL MADINA MARKET 4, date=2025-03-31, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:29,476 - __main__ - DEBUG - Parsed data: {'amount': 41.65, 'merchant': 'AL MADINA MARKET 4', 'date': '2025-03-31', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:29,476 - __main__ - DEBUG - Adding to Notion: {'amount': 41.65, 'merchant': 'AL MADINA MARKET 4', 'date': '2025-03-31', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:29,476 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:29,476 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'AL MADINA MARKET 4'}}]}, 'Amount': {'number': 41.65}, 'Date': {'date': {'start': '2025-03-31'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:29,483 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:36,078 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:36,078 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-818b-8b48-dbc3c6b77ea3', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 11.35}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 41.65}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-31', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'AL MADINA MARKET 4', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'AL MADINA MARKET 4', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/AL-MADINA-MARKET-4-1f174f2347e5818b8b48dbc3c6b77ea3', 'public_url': None, 'request_id': '8f3cef3b-d745-44be-9595-5c22408acbc6'}
2025-05-12 14:45:36,094 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-818b-8b48-dbc3c6b77ea3', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 11.35}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 41.65}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-31', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'AL MADINA MARKET 4', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'AL MADINA MARKET 4', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/AL-MADINA-MARKET-4-1f174f2347e5818b8b48dbc3c6b77ea3', 'public_url': None, 'request_id': '8f3cef3b-d745-44be-9595-5c22408acbc6'}
2025-05-12 14:45:36,103 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:36] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:36,278 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 41.65 was successfully completed at AL MADINA MARKET 4 using your e& money card ending with 4736.
Date: 2025-03-31 15:03:17
You earned AED 0.42 cash rewards with this transaction
Available balance: AED 358.52
Transaction ID: 129159872
2025-05-12 14:45:36,278 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 41.65 was successfully completed at AL MADINA MARKET 4 using your e& money card ending with 4736.
Date: 2025-03-31 15:03:17
You earned AED 0.42 cash rewards with this transaction
Available balance: AED 358.52
Transaction ID: 129159872
2025-05-12 14:45:36,278 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:36,278 - __main__ - DEBUG - Extracted amount: 41.65
2025-05-12 14:45:36,278 - __main__ - DEBUG - Extracted merchant: AL MADINA MARKET 4
2025-05-12 14:45:36,278 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-03-31
2025-05-12 14:45:36,292 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:36,293 - __main__ - DEBUG - Final parsed data: amount=41.65, merchant=AL MADINA MARKET 4, date=2025-03-31, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:36,293 - __main__ - DEBUG - Parsed data: {'amount': 41.65, 'merchant': 'AL MADINA MARKET 4', 'date': '2025-03-31', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:36,294 - __main__ - DEBUG - Adding to Notion: {'amount': 41.65, 'merchant': 'AL MADINA MARKET 4', 'date': '2025-03-31', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:36,295 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:36,296 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'AL MADINA MARKET 4'}}]}, 'Amount': {'number': 41.65}, 'Date': {'date': {'start': '2025-03-31'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:36,299 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:38,166 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:38,168 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8126-aab4-c56510f1c9d1', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 11.35}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 41.65}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-31', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'AL MADINA MARKET 4', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'AL MADINA MARKET 4', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/AL-MADINA-MARKET-4-1f174f2347e58126aab4c56510f1c9d1', 'public_url': None, 'request_id': '0f3e29f7-710d-4ef7-b366-59f59f7f3b52'}
2025-05-12 14:45:38,176 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8126-aab4-c56510f1c9d1', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 11.35}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Mar'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 41.65}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-03-31', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'AL MADINA MARKET 4', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'AL MADINA MARKET 4', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/AL-MADINA-MARKET-4-1f174f2347e58126aab4c56510f1c9d1', 'public_url': None, 'request_id': '0f3e29f7-710d-4ef7-b366-59f59f7f3b52'}
2025-05-12 14:45:38,183 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:38] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:38,226 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 28.50 was successfully completed at DUBAI TAXI using your e& money card ending with 4736.
Date: 2025-04-01 10:39:41
You earned AED 0.28 cash rewards with this transaction
Available balance: AED 330.02
Transaction ID: 129417294
2025-05-12 14:45:38,227 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 28.50 was successfully completed at DUBAI TAXI using your e& money card ending with 4736.
Date: 2025-04-01 10:39:41
You earned AED 0.28 cash rewards with this transaction
Available balance: AED 330.02
Transaction ID: 129417294
2025-05-12 14:45:38,227 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:38,227 - __main__ - DEBUG - Extracted amount: 28.5
2025-05-12 14:45:38,227 - __main__ - DEBUG - Extracted merchant: DUBAI TAXI
2025-05-12 14:45:38,227 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-01
2025-05-12 14:45:38,233 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:38,233 - __main__ - DEBUG - Final parsed data: amount=28.5, merchant=DUBAI TAXI, date=2025-04-01, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:38,234 - __main__ - DEBUG - Parsed data: {'amount': 28.5, 'merchant': 'DUBAI TAXI', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:38,235 - __main__ - DEBUG - Adding to Notion: {'amount': 28.5, 'merchant': 'DUBAI TAXI', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:38,235 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:38,236 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'DUBAI TAXI'}}]}, 'Amount': {'number': 28.5}, 'Date': {'date': {'start': '2025-04-01'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:38,238 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:40,611 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:40,616 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-811c-8fe7-d921455c8e55', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.77}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 28.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 28.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUBAI TAXI', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUBAI TAXI', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUBAI-TAXI-1f174f2347e5811c8fe7d921455c8e55', 'public_url': None, 'request_id': 'e4f9cebf-2d0b-45df-ab9b-c3e2252ffa7f'}
2025-05-12 14:45:40,636 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-811c-8fe7-d921455c8e55', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.77}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 28.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 28.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'DUBAI TAXI', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'DUBAI TAXI', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/DUBAI-TAXI-1f174f2347e5811c8fe7d921455c8e55', 'public_url': None, 'request_id': 'e4f9cebf-2d0b-45df-ab9b-c3e2252ffa7f'}
2025-05-12 14:45:40,644 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:40] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:40,786 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 10.50 was successfully completed at AL FUTTAIM TR WATSON using your e& money card ending with 4736.
Date: 2025-04-01 12:05:18
You earned AED 0.11 cash rewards with this transaction
Available balance: AED 319.52
Transaction ID: 129439965
2025-05-12 14:45:40,789 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 10.50 was successfully completed at AL FUTTAIM TR WATSON using your e& money card ending with 4736.
Date: 2025-04-01 12:05:18
You earned AED 0.11 cash rewards with this transaction
Available balance: AED 319.52
Transaction ID: 129439965
2025-05-12 14:45:40,790 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:40,790 - __main__ - DEBUG - Extracted amount: 10.5
2025-05-12 14:45:40,793 - __main__ - DEBUG - Extracted merchant: AL FUTTAIM TR WATSON
2025-05-12 14:45:40,795 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-01
2025-05-12 14:45:40,796 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:40,798 - __main__ - DEBUG - Final parsed data: amount=10.5, merchant=AL FUTTAIM TR WATSON, date=2025-04-01, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:40,800 - __main__ - DEBUG - Parsed data: {'amount': 10.5, 'merchant': 'AL FUTTAIM TR WATSON', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:40,801 - __main__ - DEBUG - Adding to Notion: {'amount': 10.5, 'merchant': 'AL FUTTAIM TR WATSON', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:40,803 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:40,803 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'AL FUTTAIM TR WATSON'}}]}, 'Amount': {'number': 10.5}, 'Date': {'date': {'start': '2025-04-01'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:40,812 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:42,840 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:42,842 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8198-9eae-f45dc6809f96', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.86}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 10.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 10.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'AL FUTTAIM TR WATSON', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'AL FUTTAIM TR WATSON', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/AL-FUTTAIM-TR-WATSON-1f174f2347e581989eaef45dc6809f96', 'public_url': None, 'request_id': '7489a9ea-6136-4247-b0fe-5271d6f1ba69'}
2025-05-12 14:45:42,851 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8198-9eae-f45dc6809f96', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.86}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 10.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 10.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'AL FUTTAIM TR WATSON', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'AL FUTTAIM TR WATSON', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/AL-FUTTAIM-TR-WATSON-1f174f2347e581989eaef45dc6809f96', 'public_url': None, 'request_id': '7489a9ea-6136-4247-b0fe-5271d6f1ba69'}
2025-05-12 14:45:42,857 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:42] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:42,938 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 24.00 was successfully completed at PIZZA HUT DUBAI MALL using your e& money card ending with 4736.
Date: 2025-04-01 12:22:25
You earned AED 0.12 cash rewards with this transaction
Available balance: AED 295.52
Transaction ID: 129444870
2025-05-12 14:45:42,940 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 24.00 was successfully completed at PIZZA HUT DUBAI MALL using your e& money card ending with 4736.
Date: 2025-04-01 12:22:25
You earned AED 0.12 cash rewards with this transaction
Available balance: AED 295.52
Transaction ID: 129444870
2025-05-12 14:45:42,942 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:42,943 - __main__ - DEBUG - Extracted amount: 24.0
2025-05-12 14:45:42,943 - __main__ - DEBUG - Extracted merchant: PIZZA HUT DUBAI MALL
2025-05-12 14:45:42,944 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-01
2025-05-12 14:45:42,944 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:42,945 - __main__ - DEBUG - Final parsed data: amount=24.0, merchant=PIZZA HUT DUBAI MALL, date=2025-04-01, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:42,945 - __main__ - DEBUG - Parsed data: {'amount': 24.0, 'merchant': 'PIZZA HUT DUBAI MALL', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:42,946 - __main__ - DEBUG - Adding to Notion: {'amount': 24.0, 'merchant': 'PIZZA HUT DUBAI MALL', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:42,947 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:42,947 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'PIZZA HUT DUBAI MALL'}}]}, 'Amount': {'number': 24.0}, 'Date': {'date': {'start': '2025-04-01'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:42,951 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:44,521 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:44,531 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8107-b338-d465b844bb84', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 6.54}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 24}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 24}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'PIZZA HUT DUBAI MALL', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'PIZZA HUT DUBAI MALL', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/PIZZA-HUT-DUBAI-MALL-1f174f2347e58107b338d465b844bb84', 'public_url': None, 'request_id': '519c9af6-a309-4089-8100-34871c47e1f6'}
2025-05-12 14:45:44,545 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8107-b338-d465b844bb84', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 6.54}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 24}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 24}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'PIZZA HUT DUBAI MALL', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'PIZZA HUT DUBAI MALL', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/PIZZA-HUT-DUBAI-MALL-1f174f2347e58107b338d465b844bb84', 'public_url': None, 'request_id': '519c9af6-a309-4089-8100-34871c47e1f6'}
2025-05-12 14:45:44,552 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:44] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:44,688 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 3.00 was successfully completed at SALAT AL ARAB using your e& money card ending with 4736.
Date: 2025-04-01 18:51:26
You earned AED 0.03 cash rewards with this transaction
Available balance: AED 292.52
Transaction ID: 129566731
2025-05-12 14:45:44,689 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 3.00 was successfully completed at SALAT AL ARAB using your e& money card ending with 4736.
Date: 2025-04-01 18:51:26
You earned AED 0.03 cash rewards with this transaction
Available balance: AED 292.52
Transaction ID: 129566731
2025-05-12 14:45:44,690 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:44,691 - __main__ - DEBUG - Extracted amount: 3.0
2025-05-12 14:45:44,691 - __main__ - DEBUG - Extracted merchant: SALAT AL ARAB
2025-05-12 14:45:44,692 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-01
2025-05-12 14:45:44,692 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:44,693 - __main__ - DEBUG - Final parsed data: amount=3.0, merchant=SALAT AL ARAB, date=2025-04-01, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:44,693 - __main__ - DEBUG - Parsed data: {'amount': 3.0, 'merchant': 'SALAT AL ARAB', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:44,694 - __main__ - DEBUG - Adding to Notion: {'amount': 3.0, 'merchant': 'SALAT AL ARAB', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:44,695 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:44,695 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'SALAT AL ARAB'}}]}, 'Amount': {'number': 3.0}, 'Date': {'date': {'start': '2025-04-01'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:44,698 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:46,873 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:46,875 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81c8-b499-fd5c31d11fcf', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 0.82}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 3}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 3}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'SALAT AL ARAB', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'SALAT AL ARAB', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/SALAT-AL-ARAB-1f174f2347e581c8b499fd5c31d11fcf', 'public_url': None, 'request_id': '69b53203-a3b6-4888-877c-8a119edc2546'}
2025-05-12 14:45:46,883 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81c8-b499-fd5c31d11fcf', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 0.82}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 3}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 3}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'SALAT AL ARAB', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'SALAT AL ARAB', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/SALAT-AL-ARAB-1f174f2347e581c8b499fd5c31d11fcf', 'public_url': None, 'request_id': '69b53203-a3b6-4888-877c-8a119edc2546'}
2025-05-12 14:45:46,891 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:46] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:47,042 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 107.20 was successfully completed at ASIAN LOTUS RESTAURANT using your e& money card ending with 4736.
Date: 2025-04-01 23:55:16
You earned AED 1.07 cash rewards with this transaction
Available balance: AED 185.32
Transaction ID: 129679009
2025-05-12 14:45:47,044 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 107.20 was successfully completed at ASIAN LOTUS RESTAURANT using your e& money card ending with 4736.
Date: 2025-04-01 23:55:16
You earned AED 1.07 cash rewards with this transaction
Available balance: AED 185.32
Transaction ID: 129679009
2025-05-12 14:45:47,045 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:47,045 - __main__ - DEBUG - Extracted amount: 107.2
2025-05-12 14:45:47,046 - __main__ - DEBUG - Extracted merchant: ASIAN LOTUS RESTAURANT
2025-05-12 14:45:47,046 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-01
2025-05-12 14:45:47,047 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:47,047 - __main__ - DEBUG - Final parsed data: amount=107.2, merchant=ASIAN LOTUS RESTAURANT, date=2025-04-01, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:47,048 - __main__ - DEBUG - Parsed data: {'amount': 107.2, 'merchant': 'ASIAN LOTUS RESTAURANT', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:47,049 - __main__ - DEBUG - Adding to Notion: {'amount': 107.2, 'merchant': 'ASIAN LOTUS RESTAURANT', 'date': '2025-04-01', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:47,049 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:47,050 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'ASIAN LOTUS RESTAURANT'}}]}, 'Amount': {'number': 107.2}, 'Date': {'date': {'start': '2025-04-01'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:47,053 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:48,788 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:48,788 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8125-85ed-ea46670cc8f8', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 29.21}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 107.2}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 107.2}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ASIAN LOTUS RESTAURANT', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ASIAN LOTUS RESTAURANT', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ASIAN-LOTUS-RESTAURANT-1f174f2347e5812585edea46670cc8f8', 'public_url': None, 'request_id': 'ba698da6-96ba-4543-8346-92cd56d3ff13'}
2025-05-12 14:45:48,806 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8125-85ed-ea46670cc8f8', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 29.21}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 107.2}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 107.2}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-01', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ASIAN LOTUS RESTAURANT', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ASIAN LOTUS RESTAURANT', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ASIAN-LOTUS-RESTAURANT-1f174f2347e5812585edea46670cc8f8', 'public_url': None, 'request_id': 'ba698da6-96ba-4543-8346-92cd56d3ff13'}
2025-05-12 14:45:48,812 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:48] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:48,868 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 7.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-03 13:47:45
You earned AED 0.04 cash rewards with this transaction
Available balance: AED 177.82
Transaction ID: 130209743
2025-05-12 14:45:48,868 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 7.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-03 13:47:45
You earned AED 0.04 cash rewards with this transaction
Available balance: AED 177.82
Transaction ID: 130209743
2025-05-12 14:45:48,885 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:48,885 - __main__ - DEBUG - Extracted amount: 7.5
2025-05-12 14:45:48,886 - __main__ - DEBUG - Extracted merchant: ANGELS KITCHEN DMCC
2025-05-12 14:45:48,886 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-03
2025-05-12 14:45:48,887 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:48,887 - __main__ - DEBUG - Final parsed data: amount=7.5, merchant=ANGELS KITCHEN DMCC, date=2025-04-03, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:48,888 - __main__ - DEBUG - Parsed data: {'amount': 7.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-03', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:48,888 - __main__ - DEBUG - Adding to Notion: {'amount': 7.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-03', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:48,889 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:48,890 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'ANGELS KITCHEN DMCC'}}]}, 'Amount': {'number': 7.5}, 'Date': {'date': {'start': '2025-04-03'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:48,893 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:50,575 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:50,576 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81b5-b141-c5a0754e0925', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.04}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-03', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e581b5b141c5a0754e0925', 'public_url': None, 'request_id': 'f980f800-fe18-42bb-b0bf-2c44ddbe50db'}
2025-05-12 14:45:50,585 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81b5-b141-c5a0754e0925', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.04}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-03', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e581b5b141c5a0754e0925', 'public_url': None, 'request_id': 'f980f800-fe18-42bb-b0bf-2c44ddbe50db'}
2025-05-12 14:45:50,592 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:50] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:50,615 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 2.00 was successfully completed at NEAR ME MINI MART DMCC using your e& money card ending with 4736.
Date: 2025-04-04 13:15:59
You earned AED 0.02 cash rewards with this transaction
Available balance: AED 175.82
Transaction ID: 130540881
2025-05-12 14:45:50,615 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 2.00 was successfully completed at NEAR ME MINI MART DMCC using your e& money card ending with 4736.
Date: 2025-04-04 13:15:59
You earned AED 0.02 cash rewards with this transaction
Available balance: AED 175.82
Transaction ID: 130540881
2025-05-12 14:45:50,615 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:50,615 - __main__ - DEBUG - Extracted amount: 2.0
2025-05-12 14:45:50,615 - __main__ - DEBUG - Extracted merchant: NEAR ME MINI MART DMCC
2025-05-12 14:45:50,615 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-04
2025-05-12 14:45:50,615 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:50,630 - __main__ - DEBUG - Final parsed data: amount=2.0, merchant=NEAR ME MINI MART DMCC, date=2025-04-04, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:50,631 - __main__ - DEBUG - Parsed data: {'amount': 2.0, 'merchant': 'NEAR ME MINI MART DMCC', 'date': '2025-04-04', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:50,632 - __main__ - DEBUG - Adding to Notion: {'amount': 2.0, 'merchant': 'NEAR ME MINI MART DMCC', 'date': '2025-04-04', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:50,633 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:50,634 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'NEAR ME MINI MART DMCC'}}]}, 'Amount': {'number': 2.0}, 'Date': {'date': {'start': '2025-04-04'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:50,637 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:51,976 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:51,978 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8142-affc-e70779df7885', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 0.54}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 2}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 2}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-04', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NEAR ME MINI MART DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NEAR ME MINI MART DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NEAR-ME-MINI-MART-DMCC-1f174f2347e58142affce70779df7885', 'public_url': None, 'request_id': '3ae26708-a928-4232-b209-3d3473b29c60'}
2025-05-12 14:45:51,985 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8142-affc-e70779df7885', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 0.54}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 2}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 2}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-04', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NEAR ME MINI MART DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NEAR ME MINI MART DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NEAR-ME-MINI-MART-DMCC-1f174f2347e58142affce70779df7885', 'public_url': None, 'request_id': '3ae26708-a928-4232-b209-3d3473b29c60'}
2025-05-12 14:45:51,988 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:51] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:52,043 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 49.26 was successfully completed at MMI TRADE CENTER SHOP using your e& money card ending with 4736.
Date: 2025-04-04 22:09:14
Available balance: AED 126.56
Transaction ID: 130722041
2025-05-12 14:45:52,044 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 49.26 was successfully completed at MMI TRADE CENTER SHOP using your e& money card ending with 4736.
Date: 2025-04-04 22:09:14
Available balance: AED 126.56
Transaction ID: 130722041
2025-05-12 14:45:52,045 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:52,045 - __main__ - DEBUG - Extracted amount: 49.26
2025-05-12 14:45:52,046 - __main__ - DEBUG - Extracted merchant: MMI TRADE CENTER SHOP
2025-05-12 14:45:52,047 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-04
2025-05-12 14:45:52,048 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:52,048 - __main__ - DEBUG - Final parsed data: amount=49.26, merchant=MMI TRADE CENTER SHOP, date=2025-04-04, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:52,049 - __main__ - DEBUG - Parsed data: {'amount': 49.26, 'merchant': 'MMI TRADE CENTER SHOP', 'date': '2025-04-04', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:52,050 - __main__ - DEBUG - Adding to Notion: {'amount': 49.26, 'merchant': 'MMI TRADE CENTER SHOP', 'date': '2025-04-04', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:52,051 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:52,051 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'MMI TRADE CENTER SHOP'}}]}, 'Amount': {'number': 49.26}, 'Date': {'date': {'start': '2025-04-04'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:52,054 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:53,384 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:53,401 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81ab-ac68-d712bfe6b331', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 13.42}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 49.26}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 49.26}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-04', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'MMI TRADE CENTER SHOP', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'MMI TRADE CENTER SHOP', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/MMI-TRADE-CENTER-SHOP-1f174f2347e581abac68d712bfe6b331', 'public_url': None, 'request_id': '23286731-2ddc-4437-bec9-c17a163fafca'}
2025-05-12 14:45:53,439 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81ab-ac68-d712bfe6b331', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 13.42}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 49.26}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 49.26}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-04', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'MMI TRADE CENTER SHOP', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'MMI TRADE CENTER SHOP', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/MMI-TRADE-CENTER-SHOP-1f174f2347e581abac68d712bfe6b331', 'public_url': None, 'request_id': '23286731-2ddc-4437-bec9-c17a163fafca'}
2025-05-12 14:45:53,456 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:53] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:53,584 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 15.50 was successfully completed at CBS FINE FOODS GROCERY using your e& money card ending with 4736.
Date: 2025-04-05 15:35:31
Available balance: AED 111.06
Transaction ID: 130934001
2025-05-12 14:45:53,585 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 15.50 was successfully completed at CBS FINE FOODS GROCERY using your e& money card ending with 4736.
Date: 2025-04-05 15:35:31
Available balance: AED 111.06
Transaction ID: 130934001
2025-05-12 14:45:53,586 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:53,587 - __main__ - DEBUG - Extracted amount: 15.5
2025-05-12 14:45:53,587 - __main__ - DEBUG - Extracted merchant: CBS FINE FOODS GROCERY
2025-05-12 14:45:53,588 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-05
2025-05-12 14:45:53,589 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:53,589 - __main__ - DEBUG - Final parsed data: amount=15.5, merchant=CBS FINE FOODS GROCERY, date=2025-04-05, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:53,590 - __main__ - DEBUG - Parsed data: {'amount': 15.5, 'merchant': 'CBS FINE FOODS GROCERY', 'date': '2025-04-05', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:53,591 - __main__ - DEBUG - Adding to Notion: {'amount': 15.5, 'merchant': 'CBS FINE FOODS GROCERY', 'date': '2025-04-05', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:53,592 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:53,592 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'CBS FINE FOODS GROCERY'}}]}, 'Amount': {'number': 15.5}, 'Date': {'date': {'start': '2025-04-05'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:53,597 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:55,426 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:55,428 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-816d-ae28-c830056d3b24', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 4.22}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 15.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 15.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-05', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CBS FINE FOODS GROCERY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CBS FINE FOODS GROCERY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CBS-FINE-FOODS-GROCERY-1f174f2347e5816dae28c830056d3b24', 'public_url': None, 'request_id': '494f1cb6-058a-4f55-9c94-6acb8fbb894a'}
2025-05-12 14:45:55,437 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-816d-ae28-c830056d3b24', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 4.22}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 15.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 15.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-05', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CBS FINE FOODS GROCERY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CBS FINE FOODS GROCERY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CBS-FINE-FOODS-GROCERY-1f174f2347e5816dae28c830056d3b24', 'public_url': None, 'request_id': '494f1cb6-058a-4f55-9c94-6acb8fbb894a'}
2025-05-12 14:45:55,445 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:55] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:55,532 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 22.00 was successfully completed at MADHURA SWEETS MEALS using your e& money card ending with 4736.
Date: 2025-04-05 16:22:24
Available balance: AED 89.06
Transaction ID: 130946162
2025-05-12 14:45:55,534 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 22.00 was successfully completed at MADHURA SWEETS MEALS using your e& money card ending with 4736.
Date: 2025-04-05 16:22:24
Available balance: AED 89.06
Transaction ID: 130946162
2025-05-12 14:45:55,535 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:55,536 - __main__ - DEBUG - Extracted amount: 22.0
2025-05-12 14:45:55,536 - __main__ - DEBUG - Extracted merchant: MADHURA SWEETS MEALS
2025-05-12 14:45:55,537 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-05
2025-05-12 14:45:55,537 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:55,538 - __main__ - DEBUG - Final parsed data: amount=22.0, merchant=MADHURA SWEETS MEALS, date=2025-04-05, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:55,539 - __main__ - DEBUG - Parsed data: {'amount': 22.0, 'merchant': 'MADHURA SWEETS MEALS', 'date': '2025-04-05', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:55,540 - __main__ - DEBUG - Adding to Notion: {'amount': 22.0, 'merchant': 'MADHURA SWEETS MEALS', 'date': '2025-04-05', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:55,540 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:55,541 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'MADHURA SWEETS MEALS'}}]}, 'Amount': {'number': 22.0}, 'Date': {'date': {'start': '2025-04-05'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:55,546 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:57,846 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:57,848 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8156-935f-d8a2b98a1c97', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.99}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 22}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 22}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-05', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'MADHURA SWEETS MEALS', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'MADHURA SWEETS MEALS', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/MADHURA-SWEETS-MEALS-1f174f2347e58156935fd8a2b98a1c97', 'public_url': None, 'request_id': '3da1e086-bda7-45cf-b025-d71aec5c620f'}
2025-05-12 14:45:57,856 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8156-935f-d8a2b98a1c97', 'created_time': '2025-05-12T10:45:00.000Z', 'last_edited_time': '2025-05-12T10:45:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 5.99}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 22}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 22}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-05', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'MADHURA SWEETS MEALS', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'MADHURA SWEETS MEALS', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/MADHURA-SWEETS-MEALS-1f174f2347e58156935fd8a2b98a1c97', 'public_url': None, 'request_id': '3da1e086-bda7-45cf-b025-d71aec5c620f'}
2025-05-12 14:45:57,862 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:57] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:57,991 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 6.50 was successfully completed at PEOPLE EXPRESS SMKT using your e& money card ending with 4736.
Date: 2025-04-06 01:49:45
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 82.56
Transaction ID: 131130162
2025-05-12 14:45:57,991 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 6.50 was successfully completed at PEOPLE EXPRESS SMKT using your e& money card ending with 4736.
Date: 2025-04-06 01:49:45
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 82.56
Transaction ID: 131130162
2025-05-12 14:45:57,991 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:57,991 - __main__ - DEBUG - Extracted amount: 6.5
2025-05-12 14:45:57,991 - __main__ - DEBUG - Extracted merchant: PEOPLE EXPRESS SMKT
2025-05-12 14:45:57,991 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-06
2025-05-12 14:45:57,991 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:57,991 - __main__ - DEBUG - Final parsed data: amount=6.5, merchant=PEOPLE EXPRESS SMKT, date=2025-04-06, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:58,002 - __main__ - DEBUG - Parsed data: {'amount': 6.5, 'merchant': 'PEOPLE EXPRESS SMKT', 'date': '2025-04-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:58,003 - __main__ - DEBUG - Adding to Notion: {'amount': 6.5, 'merchant': 'PEOPLE EXPRESS SMKT', 'date': '2025-04-06', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:58,003 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:58,004 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'PEOPLE EXPRESS SMKT'}}]}, 'Amount': {'number': 6.5}, 'Date': {'date': {'start': '2025-04-06'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:58,008 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:45:59,515 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:45:59,517 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81b5-abc0-fdaf2c215eee', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.77}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 6.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 6.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'PEOPLE EXPRESS SMKT', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'PEOPLE EXPRESS SMKT', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/PEOPLE-EXPRESS-SMKT-1f174f2347e581b5abc0fdaf2c215eee', 'public_url': None, 'request_id': '34575818-7fcc-4cd0-9658-3bd5271b4714'}
2025-05-12 14:45:59,526 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81b5-abc0-fdaf2c215eee', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.77}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 6.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 6.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-06', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'PEOPLE EXPRESS SMKT', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'PEOPLE EXPRESS SMKT', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/PEOPLE-EXPRESS-SMKT-1f174f2347e581b5abc0fdaf2c215eee', 'public_url': None, 'request_id': '34575818-7fcc-4cd0-9658-3bd5271b4714'}
2025-05-12 14:45:59,532 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:45:59] "POST /process HTTP/1.1" 200 -
2025-05-12 14:45:59,635 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 7.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-07 14:01:07
You earned AED 0.04 cash rewards with this transaction
Available balance: AED 75.06
Transaction ID: 131580353
2025-05-12 14:45:59,637 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 7.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-07 14:01:07
You earned AED 0.04 cash rewards with this transaction
Available balance: AED 75.06
Transaction ID: 131580353
2025-05-12 14:45:59,638 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:45:59,638 - __main__ - DEBUG - Extracted amount: 7.5
2025-05-12 14:45:59,639 - __main__ - DEBUG - Extracted merchant: ANGELS KITCHEN DMCC
2025-05-12 14:45:59,639 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-07
2025-05-12 14:45:59,640 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:45:59,641 - __main__ - DEBUG - Final parsed data: amount=7.5, merchant=ANGELS KITCHEN DMCC, date=2025-04-07, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:45:59,642 - __main__ - DEBUG - Parsed data: {'amount': 7.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-07', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:59,642 - __main__ - DEBUG - Adding to Notion: {'amount': 7.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-07', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:45:59,643 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:45:59,644 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'ANGELS KITCHEN DMCC'}}]}, 'Amount': {'number': 7.5}, 'Date': {'date': {'start': '2025-04-07'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:45:59,648 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:46:04,947 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:46:04,951 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-811b-b6f5-ff7dde989b46', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.04}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-07', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e5811bb6f5ff7dde989b46', 'public_url': None, 'request_id': 'e3a18115-2c55-4f9d-908b-faffca1e6936'}
2025-05-12 14:46:04,959 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-811b-b6f5-ff7dde989b46', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.04}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-07', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e5811bb6f5ff7dde989b46', 'public_url': None, 'request_id': 'e3a18115-2c55-4f9d-908b-faffca1e6936'}
2025-05-12 14:46:04,966 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:46:04] "POST /process HTTP/1.1" 200 -
2025-05-12 14:46:05,104 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 15.00 was successfully completed at SUSHI YOUR WAY using your e& money card ending with 4736.
Date: 2025-04-07 21:23:31
You earned AED 0.15 cash rewards with this transaction
Available balance: AED 60.06
Transaction ID: 131714986
2025-05-12 14:46:05,107 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 15.00 was successfully completed at SUSHI YOUR WAY using your e& money card ending with 4736.
Date: 2025-04-07 21:23:31
You earned AED 0.15 cash rewards with this transaction
Available balance: AED 60.06
Transaction ID: 131714986
2025-05-12 14:46:05,108 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:46:05,109 - __main__ - DEBUG - Extracted amount: 15.0
2025-05-12 14:46:05,109 - __main__ - DEBUG - Extracted merchant: SUSHI YOUR WAY
2025-05-12 14:46:05,110 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-07
2025-05-12 14:46:05,110 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:46:05,111 - __main__ - DEBUG - Final parsed data: amount=15.0, merchant=SUSHI YOUR WAY, date=2025-04-07, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:46:05,112 - __main__ - DEBUG - Parsed data: {'amount': 15.0, 'merchant': 'SUSHI YOUR WAY', 'date': '2025-04-07', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:05,113 - __main__ - DEBUG - Adding to Notion: {'amount': 15.0, 'merchant': 'SUSHI YOUR WAY', 'date': '2025-04-07', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:05,115 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:46:05,115 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'SUSHI YOUR WAY'}}]}, 'Amount': {'number': 15.0}, 'Date': {'date': {'start': '2025-04-07'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:46:05,120 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:46:06,550 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:46:06,550 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8156-894e-ceab5aa73d45', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 4.09}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 15}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 15}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-07', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'SUSHI YOUR WAY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'SUSHI YOUR WAY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/SUSHI-YOUR-WAY-1f174f2347e58156894eceab5aa73d45', 'public_url': None, 'request_id': 'd89a1db3-a966-4a32-a4b8-0206d60c5d1a'}
2025-05-12 14:46:06,571 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8156-894e-ceab5aa73d45', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 4.09}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 15}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 15}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-07', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'SUSHI YOUR WAY', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'SUSHI YOUR WAY', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/SUSHI-YOUR-WAY-1f174f2347e58156894eceab5aa73d45', 'public_url': None, 'request_id': 'd89a1db3-a966-4a32-a4b8-0206d60c5d1a'}
2025-05-12 14:46:06,579 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:46:06] "POST /process HTTP/1.1" 200 -
2025-05-12 14:46:06,699 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 12.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-08 15:28:01
You earned AED 0.06 cash rewards with this transaction
Available balance: AED 47.56
Transaction ID: 131917679
2025-05-12 14:46:06,699 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 12.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-08 15:28:01
You earned AED 0.06 cash rewards with this transaction
Available balance: AED 47.56
Transaction ID: 131917679
2025-05-12 14:46:06,699 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:46:06,699 - __main__ - DEBUG - Extracted amount: 12.5
2025-05-12 14:46:06,699 - __main__ - DEBUG - Extracted merchant: ANGELS KITCHEN DMCC
2025-05-12 14:46:06,699 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-08
2025-05-12 14:46:06,699 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:46:06,699 - __main__ - DEBUG - Final parsed data: amount=12.5, merchant=ANGELS KITCHEN DMCC, date=2025-04-08, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:46:06,707 - __main__ - DEBUG - Parsed data: {'amount': 12.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-08', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:06,708 - __main__ - DEBUG - Adding to Notion: {'amount': 12.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-08', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:06,708 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:46:06,709 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'ANGELS KITCHEN DMCC'}}]}, 'Amount': {'number': 12.5}, 'Date': {'date': {'start': '2025-04-08'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:46:06,715 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:46:08,218 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:46:08,220 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8188-b217-d8251cea967e', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.41}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 12.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 12.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-08', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e58188b217d8251cea967e', 'public_url': None, 'request_id': 'd9e42fb0-6d54-44cd-8e7f-66ee33196d34'}
2025-05-12 14:46:08,227 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8188-b217-d8251cea967e', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.41}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 12.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 12.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-08', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e58188b217d8251cea967e', 'public_url': None, 'request_id': 'd9e42fb0-6d54-44cd-8e7f-66ee33196d34'}
2025-05-12 14:46:08,235 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:46:08] "POST /process HTTP/1.1" 200 -
2025-05-12 14:46:08,442 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 5.00 was successfully completed at HOMELY FOODS REST. using your e& money card ending with 4736.
Date: 2025-04-08 21:24:14
You earned AED 0.05 cash rewards with this transaction
Available balance: AED 42.56
Transaction ID: 132025225
2025-05-12 14:46:08,443 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 5.00 was successfully completed at HOMELY FOODS REST. using your e& money card ending with 4736.
Date: 2025-04-08 21:24:14
You earned AED 0.05 cash rewards with this transaction
Available balance: AED 42.56
Transaction ID: 132025225
2025-05-12 14:46:08,445 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:46:08,445 - __main__ - DEBUG - Extracted amount: 5.0
2025-05-12 14:46:08,446 - __main__ - DEBUG - Extracted merchant: HOMELY FOODS REST.
2025-05-12 14:46:08,446 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-08
2025-05-12 14:46:08,447 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:46:08,448 - __main__ - DEBUG - Final parsed data: amount=5.0, merchant=HOMELY FOODS REST., date=2025-04-08, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:46:08,448 - __main__ - DEBUG - Parsed data: {'amount': 5.0, 'merchant': 'HOMELY FOODS REST.', 'date': '2025-04-08', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:08,449 - __main__ - DEBUG - Adding to Notion: {'amount': 5.0, 'merchant': 'HOMELY FOODS REST.', 'date': '2025-04-08', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:08,450 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:46:08,451 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'HOMELY FOODS REST.'}}]}, 'Amount': {'number': 5.0}, 'Date': {'date': {'start': '2025-04-08'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:46:08,454 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:46:09,913 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:46:09,914 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8119-919d-d3819d7e508a', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.36}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-08', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'HOMELY FOODS REST.', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'HOMELY FOODS REST.', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/HOMELY-FOODS-REST-1f174f2347e58119919dd3819d7e508a', 'public_url': None, 'request_id': '1f631dd3-f76b-4048-9ed7-af8dcc157464'}
2025-05-12 14:46:09,924 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-8119-919d-d3819d7e508a', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.36}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-08', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'HOMELY FOODS REST.', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'HOMELY FOODS REST.', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/HOMELY-FOODS-REST-1f174f2347e58119919dd3819d7e508a', 'public_url': None, 'request_id': '1f631dd3-f76b-4048-9ed7-af8dcc157464'}
2025-05-12 14:46:09,931 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:46:09] "POST /process HTTP/1.1" 200 -
2025-05-12 14:46:10,083 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 12.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-09 14:02:45
You earned AED 0.06 cash rewards with this transaction
Available balance: AED 30.06
Transaction ID: 132216112
2025-05-12 14:46:10,087 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 12.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-09 14:02:45
You earned AED 0.06 cash rewards with this transaction
Available balance: AED 30.06
Transaction ID: 132216112
2025-05-12 14:46:10,092 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:46:10,094 - __main__ - DEBUG - Extracted amount: 12.5
2025-05-12 14:46:10,096 - __main__ - DEBUG - Extracted merchant: ANGELS KITCHEN DMCC
2025-05-12 14:46:10,098 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-09
2025-05-12 14:46:10,100 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:46:10,101 - __main__ - DEBUG - Final parsed data: amount=12.5, merchant=ANGELS KITCHEN DMCC, date=2025-04-09, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:46:10,103 - __main__ - DEBUG - Parsed data: {'amount': 12.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-09', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:10,104 - __main__ - DEBUG - Adding to Notion: {'amount': 12.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-09', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:10,106 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:46:10,107 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'ANGELS KITCHEN DMCC'}}]}, 'Amount': {'number': 12.5}, 'Date': {'date': {'start': '2025-04-09'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:46:10,113 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:46:12,544 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:46:12,544 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-816b-8188-f918a279a060', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.41}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 12.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 12.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-09', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e5816b8188f918a279a060', 'public_url': None, 'request_id': '76c20313-b708-49f5-a64a-fee0ad75c411'}
2025-05-12 14:46:12,555 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-816b-8188-f918a279a060', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 3.41}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 12.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 12.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-09', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e5816b8188f918a279a060', 'public_url': None, 'request_id': '76c20313-b708-49f5-a64a-fee0ad75c411'}
2025-05-12 14:46:12,563 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:46:12] "POST /process HTTP/1.1" 200 -
2025-05-12 14:46:12,622 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 7.00 was successfully completed at HOMELY FOODS REST. using your e& money card ending with 4736.
Date: 2025-04-09 21:17:59
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 23.06
Transaction ID: 132356384
2025-05-12 14:46:12,623 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 7.00 was successfully completed at HOMELY FOODS REST. using your e& money card ending with 4736.
Date: 2025-04-09 21:17:59
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 23.06
Transaction ID: 132356384
2025-05-12 14:46:12,624 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:46:12,624 - __main__ - DEBUG - Extracted amount: 7.0
2025-05-12 14:46:12,625 - __main__ - DEBUG - Extracted merchant: HOMELY FOODS REST.
2025-05-12 14:46:12,626 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-09
2025-05-12 14:46:12,626 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:46:12,627 - __main__ - DEBUG - Final parsed data: amount=7.0, merchant=HOMELY FOODS REST., date=2025-04-09, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:46:12,628 - __main__ - DEBUG - Parsed data: {'amount': 7.0, 'merchant': 'HOMELY FOODS REST.', 'date': '2025-04-09', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:12,628 - __main__ - DEBUG - Adding to Notion: {'amount': 7.0, 'merchant': 'HOMELY FOODS REST.', 'date': '2025-04-09', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:12,629 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:46:12,630 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'HOMELY FOODS REST.'}}]}, 'Amount': {'number': 7.0}, 'Date': {'date': {'start': '2025-04-09'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:46:12,634 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:46:14,413 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:46:14,413 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81ef-b6e8-ddf4433ada38', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-09', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'HOMELY FOODS REST.', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'HOMELY FOODS REST.', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/HOMELY-FOODS-REST-1f174f2347e581efb6e8ddf4433ada38', 'public_url': None, 'request_id': 'af9b4357-caae-4fb7-a7ab-87a06a66d0a1'}
2025-05-12 14:46:14,434 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81ef-b6e8-ddf4433ada38', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 1.91}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-09', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'HOMELY FOODS REST.', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'HOMELY FOODS REST.', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/HOMELY-FOODS-REST-1f174f2347e581efb6e8ddf4433ada38', 'public_url': None, 'request_id': 'af9b4357-caae-4fb7-a7ab-87a06a66d0a1'}
2025-05-12 14:46:14,442 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:46:14] "POST /process HTTP/1.1" 200 -
2025-05-12 14:46:14,482 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 7.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-10 14:19:24
You earned AED 0.04 cash rewards with this transaction
Available balance: AED 15.56
Transaction ID: 132557023
2025-05-12 14:46:14,493 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 7.50 was successfully completed at ANGELS KITCHEN DMCC using your e& money card ending with 4736.
Date: 2025-04-10 14:19:24
You earned AED 0.04 cash rewards with this transaction
Available balance: AED 15.56
Transaction ID: 132557023
2025-05-12 14:46:14,495 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:46:14,496 - __main__ - DEBUG - Extracted amount: 7.5
2025-05-12 14:46:14,496 - __main__ - DEBUG - Extracted merchant: ANGELS KITCHEN DMCC
2025-05-12 14:46:14,497 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-10
2025-05-12 14:46:14,497 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:46:14,498 - __main__ - DEBUG - Final parsed data: amount=7.5, merchant=ANGELS KITCHEN DMCC, date=2025-04-10, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:46:14,499 - __main__ - DEBUG - Parsed data: {'amount': 7.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:14,499 - __main__ - DEBUG - Adding to Notion: {'amount': 7.5, 'merchant': 'ANGELS KITCHEN DMCC', 'date': '2025-04-10', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:14,500 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:46:14,500 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'ANGELS KITCHEN DMCC'}}]}, 'Amount': {'number': 7.5}, 'Date': {'date': {'start': '2025-04-10'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:46:14,503 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:46:15,824 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:46:15,840 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-818c-b8a8-e5f3f7a02a87', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.04}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e5818cb8a8e5f3f7a02a87', 'public_url': None, 'request_id': '3caea3aa-7c69-48e6-bf3a-83f6f2c9c096'}
2025-05-12 14:46:15,852 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-818c-b8a8-e5f3f7a02a87', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.04}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.5}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.5}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-10', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'ANGELS KITCHEN DMCC', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'ANGELS KITCHEN DMCC', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/ANGELS-KITCHEN-DMCC-1f174f2347e5818cb8a8e5f3f7a02a87', 'public_url': None, 'request_id': '3caea3aa-7c69-48e6-bf3a-83f6f2c9c096'}
2025-05-12 14:46:15,859 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:46:15] "POST /process HTTP/1.1" 200 -
2025-05-12 14:46:15,889 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 8.00 was successfully completed at CHOITHRAM T.CHOITHRA using your e& money card ending with 4736.
Date: 2025-04-11 00:12:31
You earned AED 0.08 cash rewards with this transaction
Available balance: AED 7.56
Transaction ID: 132740962
2025-05-12 14:46:15,891 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 8.00 was successfully completed at CHOITHRAM T.CHOITHRA using your e& money card ending with 4736.
Date: 2025-04-11 00:12:31
You earned AED 0.08 cash rewards with this transaction
Available balance: AED 7.56
Transaction ID: 132740962
2025-05-12 14:46:15,892 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:46:15,893 - __main__ - DEBUG - Extracted amount: 8.0
2025-05-12 14:46:15,893 - __main__ - DEBUG - Extracted merchant: CHOITHRAM T.CHOITHRA
2025-05-12 14:46:15,894 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-11
2025-05-12 14:46:15,894 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:46:15,895 - __main__ - DEBUG - Final parsed data: amount=8.0, merchant=CHOITHRAM T.CHOITHRA, date=2025-04-11, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:46:15,896 - __main__ - DEBUG - Parsed data: {'amount': 8.0, 'merchant': 'CHOITHRAM T.CHOITHRA', 'date': '2025-04-11', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:15,896 - __main__ - DEBUG - Adding to Notion: {'amount': 8.0, 'merchant': 'CHOITHRAM T.CHOITHRA', 'date': '2025-04-11', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:15,897 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:46:15,898 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'CHOITHRAM T.CHOITHRA'}}]}, 'Amount': {'number': 8.0}, 'Date': {'date': {'start': '2025-04-11'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:46:15,903 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:46:17,239 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:46:17,241 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81ee-ae84-ef0d263913e7', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.18}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 8}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 8}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-11', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CHOITHRAM T.CHOITHRA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CHOITHRAM T.CHOITHRA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CHOITHRAM-T-CHOITHRA-1f174f2347e581eeae84ef0d263913e7', 'public_url': None, 'request_id': '0ebda9a8-0054-44e7-ad11-3a02cc113a8f'}
2025-05-12 14:46:17,249 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81ee-ae84-ef0d263913e7', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.18}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 8}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 8}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-11', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'CHOITHRAM T.CHOITHRA', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'CHOITHRAM T.CHOITHRA', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/CHOITHRAM-T-CHOITHRA-1f174f2347e581eeae84ef0d263913e7', 'public_url': None, 'request_id': '0ebda9a8-0054-44e7-ad11-3a02cc113a8f'}
2025-05-12 14:46:17,257 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:46:17] "POST /process HTTP/1.1" 200 -
2025-05-12 14:46:17,348 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 7.45 was successfully completed at NWZ WEST ZONE SUPERMAR using your e& money card ending with 4736.
Date: 2025-04-12 13:54:27
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 0.11
Transaction ID: 133190689
2025-05-12 14:46:17,349 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 7.45 was successfully completed at NWZ WEST ZONE SUPERMAR using your e& money card ending with 4736.
Date: 2025-04-12 13:54:27
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 0.11
Transaction ID: 133190689
2025-05-12 14:46:17,351 - __main__ - DEBUG - Detected e&money message
2025-05-12 14:46:17,352 - __main__ - DEBUG - Extracted amount: 7.45
2025-05-12 14:46:17,352 - __main__ - DEBUG - Extracted merchant: NWZ WEST ZONE SUPERMAR
2025-05-12 14:46:17,353 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-04-12
2025-05-12 14:46:17,353 - __main__ - DEBUG - Added E&money account ID
2025-05-12 14:46:17,354 - __main__ - DEBUG - Final parsed data: amount=7.45, merchant=NWZ WEST ZONE SUPERMAR, date=2025-04-12, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 14:46:17,355 - __main__ - DEBUG - Parsed data: {'amount': 7.45, 'merchant': 'NWZ WEST ZONE SUPERMAR', 'date': '2025-04-12', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:17,356 - __main__ - DEBUG - Adding to Notion: {'amount': 7.45, 'merchant': 'NWZ WEST ZONE SUPERMAR', 'date': '2025-04-12', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 14:46:17,356 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 14:46:17,357 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'NWZ WEST ZONE SUPERMAR'}}]}, 'Amount': {'number': 7.45}, 'Date': {'date': {'start': '2025-04-12'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 14:46:17,361 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 14:46:21,519 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 14:46:21,522 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-816f-a4a0-de17e4dd5a40', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.03}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.45}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.45}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-12', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NWZ WEST ZONE SUPERMAR', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NWZ WEST ZONE SUPERMAR', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NWZ-WEST-ZONE-SUPERMAR-1f174f2347e5816fa4a0de17e4dd5a40', 'public_url': None, 'request_id': '13e2f1ef-c1c2-43b2-af15-ab51fe8eb56f'}
2025-05-12 14:46:21,533 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-816f-a4a0-de17e4dd5a40', 'created_time': '2025-05-12T10:46:00.000Z', 'last_edited_time': '2025-05-12T10:46:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.03}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Apr'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 7.45}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.45}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-04-12', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NWZ WEST ZONE SUPERMAR', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NWZ WEST ZONE SUPERMAR', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NWZ-WEST-ZONE-SUPERMAR-1f174f2347e5816fa4a0de17e4dd5a40', 'public_url': None, 'request_id': '13e2f1ef-c1c2-43b2-af15-ab51fe8eb56f'}
2025-05-12 14:46:21,542 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 14:46:21] "POST /process HTTP/1.1" 200 -
2025-05-12 15:26:58,078 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 15:26:58] "GET / HTTP/1.1" 200 -
2025-05-12 15:26:58,172 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 15:26:58] "GET /qr HTTP/1.1" 200 -
2025-05-12 15:27:15,387 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 7.45 was successfully completed at NWZ WEST ZONE SUPERMAR using your e& money card ending with 4736.
Date: 2025-06-12 13:54:27
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 0.11
Transaction ID: 133190689
2025-05-12 15:27:15,389 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 7.45 was successfully completed at NWZ WEST ZONE SUPERMAR using your e& money card ending with 4736.
Date: 2025-06-12 13:54:27
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 0.11
Transaction ID: 133190689
2025-05-12 15:27:15,390 - __main__ - DEBUG - Detected e&money message
2025-05-12 15:27:15,391 - __main__ - DEBUG - Extracted amount: 7.45
2025-05-12 15:27:15,391 - __main__ - DEBUG - Extracted merchant: NWZ WEST ZONE SUPERMAR
2025-05-12 15:27:15,392 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-06-12
2025-05-12 15:27:15,392 - __main__ - DEBUG - Added E&money account ID
2025-05-12 15:27:15,393 - __main__ - DEBUG - Final parsed data: amount=7.45, merchant=NWZ WEST ZONE SUPERMAR, date=2025-06-12, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 15:27:15,394 - __main__ - DEBUG - Parsed data: {'amount': 7.45, 'merchant': 'NWZ WEST ZONE SUPERMAR', 'date': '2025-06-12', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 15:27:15,394 - __main__ - DEBUG - Adding to Notion: {'amount': 7.45, 'merchant': 'NWZ WEST ZONE SUPERMAR', 'date': '2025-06-12', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 15:27:15,395 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 15:27:15,396 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'NWZ WEST ZONE SUPERMAR'}}]}, 'Amount': {'number': 7.45}, 'Date': {'date': {'start': '2025-06-12'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 15:27:15,401 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 15:27:17,768 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 15:27:17,774 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81fc-98ca-e057611ab765', 'created_time': '2025-05-12T11:27:00.000Z', 'last_edited_time': '2025-05-12T11:27:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.03}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Jun'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.45}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-06-12', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NWZ WEST ZONE SUPERMAR', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NWZ WEST ZONE SUPERMAR', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NWZ-WEST-ZONE-SUPERMAR-1f174f2347e581fc98cae057611ab765', 'public_url': None, 'request_id': '04257a81-4efe-4917-a6a9-e24f6fe961f8'}
2025-05-12 15:27:17,795 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81fc-98ca-e057611ab765', 'created_time': '2025-05-12T11:27:00.000Z', 'last_edited_time': '2025-05-12T11:27:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.03}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Jun'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.45}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-06-12', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NWZ WEST ZONE SUPERMAR', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NWZ WEST ZONE SUPERMAR', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NWZ-WEST-ZONE-SUPERMAR-1f174f2347e581fc98cae057611ab765', 'public_url': None, 'request_id': '04257a81-4efe-4917-a6a9-e24f6fe961f8'}
2025-05-12 15:27:17,804 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 15:27:17] "POST /process HTTP/1.1" 200 -
2025-05-12 15:27:30,719 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 15:27:33,118 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "PATCH /v1/pages/1f174f23-47e5-81fc-98ca-e057611ab765 HTTP/1.1" 200 None
2025-05-12 15:27:33,124 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 15:27:33] "POST /delete_entry HTTP/1.1" 200 -
2025-05-12 15:27:59,789 - __main__ - DEBUG - Processing message: Dear customer, a purchase of AED 7.45 was successfully completed at NWZ WEST ZONE SUPERMAR using your e& money card ending with 4736.
Date: 2025-06-12 13:54:27
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 0.11
Transaction ID: 133190689
2025-05-12 15:27:59,791 - __main__ - DEBUG - Starting SMS parsing for text: Dear customer, a purchase of AED 7.45 was successfully completed at NWZ WEST ZONE SUPERMAR using your e& money card ending with 4736.
Date: 2025-06-12 13:54:27
You earned AED 0.07 cash rewards with this transaction
Available balance: AED 0.11
Transaction ID: 133190689
2025-05-12 15:27:59,793 - __main__ - DEBUG - Detected e&money message
2025-05-12 15:27:59,794 - __main__ - DEBUG - Extracted amount: 7.45
2025-05-12 15:27:59,794 - __main__ - DEBUG - Extracted merchant: NWZ WEST ZONE SUPERMAR
2025-05-12 15:27:59,795 - __main__ - DEBUG - Extracted date using format %Y-%m-%d: 2025-06-12
2025-05-12 15:27:59,795 - __main__ - DEBUG - Added E&money account ID
2025-05-12 15:27:59,796 - __main__ - DEBUG - Final parsed data: amount=7.45, merchant=NWZ WEST ZONE SUPERMAR, date=2025-06-12, account_ids=['1c374f2347e580ac90aed5e1e7a86e32']
2025-05-12 15:27:59,797 - __main__ - DEBUG - Parsed data: {'amount': 7.45, 'merchant': 'NWZ WEST ZONE SUPERMAR', 'date': '2025-06-12', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 15:27:59,798 - __main__ - DEBUG - Adding to Notion: {'amount': 7.45, 'merchant': 'NWZ WEST ZONE SUPERMAR', 'date': '2025-06-12', 'account_ids': ['1c374f2347e580ac90aed5e1e7a86e32']}
2025-05-12 15:27:59,798 - __main__ - DEBUG - Created relations: [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]
2025-05-12 15:27:59,799 - __main__ - DEBUG - Sending request to Notion API with payload: {'parent': {'database_id': 'd89a1b2bd6bd414abdb55ad021f9f467'}, 'properties': {'Expense Name': {'title': [{'text': {'content': 'NWZ WEST ZONE SUPERMAR'}}]}, 'Amount': {'number': 7.45}, 'Date': {'date': {'start': '2025-06-12'}}, 'Accounts': {'relation': [{'id': '1c374f2347e580ac90aed5e1e7a86e32'}]}}}
2025-05-12 15:27:59,802 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 15:28:02,015 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "POST /v1/pages HTTP/1.1" 200 None
2025-05-12 15:28:02,017 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81e7-b2c4-c244891621d7', 'created_time': '2025-05-12T11:28:00.000Z', 'last_edited_time': '2025-05-12T11:28:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.03}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Jun'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.45}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-06-12', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NWZ WEST ZONE SUPERMAR', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NWZ WEST ZONE SUPERMAR', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NWZ-WEST-ZONE-SUPERMAR-1f174f2347e581e7b2c4c244891621d7', 'public_url': None, 'request_id': '4e51bc5b-8af4-4f8f-aba3-0675d046e6e9'}
2025-05-12 15:28:02,025 - __main__ - DEBUG - Notion API response: {'object': 'page', 'id': '1f174f23-47e5-81e7-b2c4-c244891621d7', 'created_time': '2025-05-12T11:28:00.000Z', 'last_edited_time': '2025-05-12T11:28:00.000Z', 'created_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'last_edited_by': {'object': 'user', 'id': '98587e8b-28a0-400b-ac31-0931a3a902b5'}, 'cover': None, 'icon': None, 'parent': {'type': 'database_id', 'database_id': 'd89a1b2b-d6bd-414a-bdb5-5ad021f9f467'}, 'archived': False, 'in_trash': False, 'properties': {'Expense This Month': {'id': '%3BQ%5Bo', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, '$ ': {'id': '%3DMHj', 'type': 'formula', 'formula': {'type': 'number', 'number': 2.03}}, 'Note': {'id': '%40mX%3D', 'type': 'rich_text', 'rich_text': []}, 'Record': {'id': 'J%7DN%7B', 'type': 'files', 'files': []}, 'month': {'id': 'WIBt', 'type': 'formula', 'formula': {'type': 'string', 'string': 'Jun'}}, 'Expense Type': {'id': 'X%3FRz', 'type': 'relation', 'relation': [], 'has_more': False}, 'Expense Last Month': {'id': '%5CG%3Ek', 'type': 'formula', 'formula': {'type': 'number', 'number': 0}}, 'Amount': {'id': 'pyo~', 'type': 'number', 'number': 7.45}, 'Accounts': {'id': 'xM%40_', 'type': 'relation', 'relation': [{'id': '1c374f23-47e5-80ac-90ae-d5e1e7a86e32'}], 'has_more': False}, 'Date': {'id': '%7Cwiz', 'type': 'date', 'date': {'start': '2025-06-12', 'end': None, 'time_zone': None}}, 'Expense Name': {'id': 'title', 'type': 'title', 'title': [{'type': 'text', 'text': {'content': 'NWZ WEST ZONE SUPERMAR', 'link': None}, 'annotations': {'bold': False, 'italic': False, 'strikethrough': False, 'underline': False, 'code': False, 'color': 'default'}, 'plain_text': 'NWZ WEST ZONE SUPERMAR', 'href': None}]}, 'Need/Want': {'id': '6dbd536d-8bd3-4082-aea1-4dfa6356258f', 'type': 'select', 'select': None}, 'Status': {'id': '9c0c1150-1553-4c5e-a8ac-cfb788397c5b', 'type': 'status', 'status': {'id': 'd044e0b4-9db1-4b13-a839-ce084a9e3792', 'name': 'To Pay', 'color': 'green'}}}, 'url': 'https://www.notion.so/NWZ-WEST-ZONE-SUPERMAR-1f174f2347e581e7b2c4c244891621d7', 'public_url': None, 'request_id': '4e51bc5b-8af4-4f8f-aba3-0675d046e6e9'}
2025-05-12 15:28:02,033 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 15:28:02] "POST /process HTTP/1.1" 200 -
2025-05-12 15:28:05,629 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.notion.com:443
2025-05-12 15:28:08,375 - urllib3.connectionpool - DEBUG - https://api.notion.com:443 "PATCH /v1/pages/1f174f23-47e5-81e7-b2c4-c244891621d7 HTTP/1.1" 200 None
2025-05-12 15:28:08,378 - werkzeug - INFO - 192.168.1.139 - - [12/May/2025 15:28:08] "POST /delete_entry HTTP/1.1" 200 -
